<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äººç”Ÿç™¾å¹´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #d9e4f7 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
        }

        .timeline-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .timeline-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .timeline-header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .main-time {
            font-size: 2rem;
            color: #34495e;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 3px;
            position: relative;
            overflow: hidden;
        }

        /* ç¬¬äºŒæ¡è¿›åº¦æ¡æ ·å¼ - ä¿®æ­£ç‰ˆ */
        .progress-bar-secondary {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 3px;
            position: relative;
            overflow: hidden;
        }

        .progress-fill-secondary {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 3px;
            position: absolute;
            left: 0;
            top: 0;
        }

        /* æ·»åŠ æ‰«å…‰ä¼ªå…ƒç´  */
        .progress-fill::after, .progress-fill-secondary::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { left: -100%; }
            100% { left: 200%; }
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .modules-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .module {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .module h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .module-content {
            color: #5a6c7d;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }

        /* ===== ç®€å†å¾®å¡ç‰‡ ===== */
        .resume-grid{
            display:grid;
            grid-template-columns:repeat(3,1fr);
            gap:12px;
            margin-top:12px;
        }
        .resume-grid .stat-item{
            background:#f8f9fa;
            padding:12px 4px;
            border-radius:8px;
            text-align:center;
        }
        .resume-grid .stat-value{font-size:1.15rem;font-weight:600;color:#2c3e50;}
        .resume-grid .stat-label{font-size:.8rem;color:#7f8c8d;margin-top:4px;}

        /* ===== æµ·å¤–èµ„äº§ - è¶…ç´§å‡‘ç‰ˆ ===== */
        .overseas-compact {
            margin-top: 8px;
        }
        
        /* ç¬¬ä¸€è¡Œï¼šè¿›åº¦æ¡ï¼ˆå†…ç½®ç™¾åˆ†æ¯”ï¼‰ */
        .overseas-bar-wrap {
            position: relative;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .overseas-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 10px;
            transition: width 1s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            min-width: 40px;
        }
        
        .overseas-bar-text {
            color: white;
            font-size: 0.75rem;
            font-weight: bold;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            white-space: nowrap;
        }
        
        /* ç¬¬äºŒè¡Œï¼šå½“å‰é‡‘é¢ / ç›®æ ‡é‡‘é¢ + æ›´æ–°æ—¶é—´ */
        .overseas-info-row {
            display: flex;
            justify-content: space-between;
            align-items: baseline;
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .overseas-amount {
            font-weight: bold;
            color: #764ba2;
            font-size: 1.1rem;
        }
        
        .overseas-target {
            color: #95a5a6;
            font-size: 0.85rem;
            margin-left: 4px;
        }
        
        .overseas-meta {
            color: #bdc3c7;
            font-size: 0.7rem;
        }
        
        /* åŠ è½½çŠ¶æ€ */
        .loading-text {
            color: #bdc3c7;
            font-style: italic;
        }

        /* ä½“é‡è®°å½•æ¨¡å— - è‡ªé€‚åº”ä¿®æ­£ç‰ˆ */
        #weightGrid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 10px;
            margin-top: 12px;
        }
        
        #weightGrid .stat-item {
            padding: 12px 4px;
            min-width: 0; /* å…³é”®ï¼šé˜²æ­¢å†…å®¹æ’‘å¼€ */
            overflow: hidden;
        }
        
        /* å“åº”å¼å­—ä½“ï¼Œé˜²æ­¢æº¢å‡º */
        #weightGrid .stat-value {
            font-size: clamp(1.5rem, 1.4vw, 1.8rem);
            line-height: 1.2;
            margin-bottom: 4px;
            word-break: break-word;
        }
        
        #weightGrid .stat-label {
            font-size: clamp(0.7rem, 2.0vw, 0.8rem);
            color: #7f8c8d;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        /* è¶…å°å±å¹•ï¼ˆ<400pxï¼‰ä¼˜åŒ–ï¼šæ”¹ä¸ºçºµå‘å¡ç‰‡å¼å¸ƒå±€ */
        @media (max-width: 400px) {
            #weightGrid {
                grid-template-columns: 1fr;
                gap: 8px;
            }
            #weightGrid .stat-item {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 15px;
                text-align: left;
            }
            #weightGrid .stat-value {
                margin-bottom: 0;
                font-size: 1.2rem;
            }
            #weightGrid .stat-label {
                font-size: 0.9rem;
                text-align: right;
            }
        }
    </style>

</head>
<body>
    <div class="container">
        <div class="timeline-container">
            <div class="timeline-header">
                <h1>äººç”Ÿç™¾å¹´</h1>
                <div class="main-time" id="currentTime">1991-02-01 15:05:00</div>
            </div>
            
            <div class="progress-container">
                <!-- çˆ¶äº²æ—¶é—´è½´ -->
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFillFather"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="fatherElapsed">çˆ¶äº²å·²èµ°è¿‡ï¼š0ç§’</span>
                    <span></span>
                </div>
                <!-- æ¯äº²æ—¶é—´è½´ -->
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFillMother"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="motherElapsed">æ¯äº²å·²èµ°è¿‡ï¼š0ç§’</span>
                    <span></span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="elapsedTime">å·²è¿‡å»ï¼š0ç§’</span>
                    <span></span>
                </div>
                <div class="progress-bar-secondary">
                    <div class="progress-fill-secondary" id="progressFillSecondary"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="elapsedTime2">å·²è¿‡å»ï¼š0ç§’</span>
                    <span></span>
                </div>
                <div class="progress-bar-secondary">
                    <div class="progress-fill-secondary" id="progressFillTertiary"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="elapsedTime3">å·²è¿‡å»ï¼š0ç§’</span>
                    <span></span>
                </div>
            </div>
      
        </div>

        <div class="modules-container">

            <div class="module" id="eventdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸ“… å³å°†æ¥åˆ°çš„äº‹ä»¶</h3>
                <div class="stats-grid" id="eventList">
                    <!-- JS åŠ¨æ€æ’å…¥ -->
                </div>
            </div>

            <div class="module" id="birthdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸ‚ ç”Ÿæ—¥æé†’</h3>
                <div class="module-content" id="birthdayBox">
                    <!-- JS åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- ä½“é‡è®°å½•æ¨¡å— -->
            <div class="module" id="weightModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>âš–ï¸ ä½“é‡è®°å½•</h3>
                <div class="stats-grid" id="weightGrid">
                    <div class="stat-item">
                        <div class="stat-value" id="weight-latest" style="color:#3498db;">--</div>
                        <div class="stat-label" id="weight-date">æœ€æ–°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="weight-max" style="color:#2ecc71;">--</div>
                        <div class="stat-label">æœ€é«˜</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="weight-min" style="color:#e74c3c;">--</div>
                        <div class="stat-label">æœ€ä½</div>
                    </div>
                </div>
            </div>

            <!-- è¶³è¿¹æ¨¡å— -->
            <div class="module" id="footprintModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸŒ è¶³è¿¹</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-value" id="stat-countries">0</div>
                        <div class="stat-label">å›½å®¶</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="stat-cities">0</div>
                        <div class="stat-label">åŸå¸‚</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="stat-spots">0</div>
                        <div class="stat-label">æ™¯ç‚¹</div>
                    </div>
                </div>
            </div>

            <!-- èµ„äº§è´Ÿå€ºç´§å‡‘è¡Œ -->
            <div class="module" id="wealthModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸ“Š èµ„äº§è´Ÿå€º-TH</h3>
                <!-- ç´§å‡‘è¡Œï¼švalue + label åŒèˆª -->
                <div id="compactBalance" style="line-height:1.6;font-size:1.05rem;color:#5a6c7d;">
                  <!-- JS åŠ¨æ€æ’å…¥ -->
                </div>
            </div>

            <!-- èµ„äº§è´Ÿå€ºç´§å‡‘è¡Œ -->
            <div class="module" id="wealthgghModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸ“Š èµ„äº§è´Ÿå€º-GGH</h3>
                <!-- ç´§å‡‘è¡Œï¼švalue + label åŒèˆª -->
                <div id="compactBalanceggh" style="line-height:1.6;font-size:1.05rem;color:#5a6c7d;">
                  <!-- JS åŠ¨æ€æ’å…¥ -->
                </div>
            </div>

            <!-- æµ·å¤–èµ„äº§æ¨¡å— - è¶…ç´§å‡‘2è¡Œç‰ˆ -->
            <div class="module" id="overseasModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸŒ æµ·å¤–èµ„äº§</h3>
                <div class="module-content">
                    <!-- ç¬¬1è¡Œï¼šè¿›åº¦æ¡ï¼ˆå¸¦ç™¾åˆ†æ¯”ï¼‰ -->
                    <div class="overseas-compact">
                        <div class="overseas-bar-wrap">
                            <div class="overseas-bar-fill" id="overseasBarFill" style="width: 0%">
                                <span class="overseas-bar-text" id="overseasBarText">0%</span>
                            </div>
                        </div>
                        
                        <!-- ç¬¬2è¡Œï¼šé‡‘é¢ä¿¡æ¯ï¼ˆå·¦ï¼‰+ æ›´æ–°æ—¶é—´ï¼ˆå³ï¼‰ -->
                        <div class="overseas-info-row">
                            <div>
                                <span class="overseas-amount" id="overseasCurrent">--</span>
                                <span class="overseas-target">/ â‚¬<span id="overseasTarget">500k</span></span>
                            </div>
                            <span class="overseas-meta" id="overseasMeta">æ›´æ–°ä¸­...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- æŠ•èµ„ç»„åˆæ¨¡å— -->
            <div class="module" id="portfolioModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸ“ˆ æŠ•èµ„ç»„åˆ</h3>
                <div class="module-content" style="display:flex;justify-content:center;gap:65px;font-size:1.2rem;">
                  <div style="text-align:center;">
                    <strong>æŠ•èµ„å‘¨æœŸ</strong>
                    <div id="periodText" style="color:#3498db;font-weight:bold;line-height:1.2;"></div>
                  </div>
                  <div style="text-align:center;">
                    <strong>å¹´åŒ–æ”¶ç›Šç‡</strong>
                    <div id="returnText" style="color:#2ecc71;font-weight:bold;line-height:1.2;font-size:1.3rem;"></div>
                  </div>
                </div>
              </div>

            <!-- Blog -->
            <div class="module" id="blogModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
              <h3>ğŸ“ Blog</h3>
              <div class="module-content resume-grid">
                <div class="stat-item">
                  <div class="stat-value">3</div>
                  <div class="stat-label">åˆ†ç±»</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">2</div>
                  <div class="stat-label">æ ‡ç­¾</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">7</div>
                  <div class="stat-label">æ–‡ç« </div>
                </div>
              </div>
            </div>

            <!-- å¹´åº¦æ€»ç»“ æ–‡å­—äº‘ -->
            <div class="module" id="summaryModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
                <h3>ğŸ“” å¹´åº¦æ€»ç»“</h3>
                <div id="summaryCloud" style="line-height:1.8; text-align:center; padding:10px 0;"></div>
            </div>

            <!-- ä¸ªäººç®€å† -->
            <div class="module" id="resumeModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
              <h3>ğŸ“‹ ä¸ªäººç®€å†</h3>
              <div class="module-content resume-grid">
                <div class="stat-item">
                  <div class="stat-value">7+</div>
                  <div class="stat-label">å¹´ç»éªŒ</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">CFA</div>
                  <div class="stat-label">æŒè¯äºº</div>
                </div>
                <div class="stat-item">
                  <div class="stat-value">è·¨é¢†åŸŸ</div>
                  <div class="stat-label">ç”Ÿç‰©Â·è®¡ç®—Â·é‡‘è</div>
                </div>
              </div>
            </div>
  
  
        </div>
    </div>

<script src="calendar/data.js"></script>
<script src="birthday/data.js"></script>
<script src="wealth/data.js"></script>
<script src="wealthggh/data.js"></script>
<script src="summary/data.js"></script>
<script src="portfolio/data.js"></script>
<script src="footprint/data.js"></script>
<script src="overseas/data.js"></script>
<script src="weight/data.js"></script>

<script>
        /* ====== ç™¾å¹´æ—¶å…‰è½´ä¸»é€»è¾‘ ====== */
        function updateMainDisplay() {
            const fatherBirth = new Date('1963-05-19T00:00:00');
            const motherBirth = new Date('1968-05-13T00:00:00');
            const startTime = new Date('1991-02-01T15:05:00');
            const endTime   = new Date('2091-02-01T15:05:00');
            const secondaryStartTime = new Date('2019-10-14T20:28:00');
            const tertiaryStartTime = new Date('2024-05-24T11:41:00');
            function returnnyrsfm(now, starttime){
                let yy = now.getFullYear()  - starttime.getFullYear();
                let mm = now.getMonth()     - starttime.getMonth();
                let dd = now.getDate()      - starttime.getDate();
                let hh = now.getHours()     - starttime.getHours();
                let minn=now.getMinutes()   - starttime.getMinutes();
                let ss =now.getSeconds()    - starttime.getSeconds();
                if(ss <0){ss+=60;minn--;}
                if(minn<0){minn+=60;hh--;}
                if(hh<0){hh+=24;dd--;}
                if(dd<0){
                    const prev = new Date(now.getFullYear(), now.getMonth(), 0);
                    dd += prev.getDate();
                    mm--;
                }
                if(mm<0){mm+=12;yy--;}
                return [yy, mm, dd, hh, minn, ss]
            }
            const now = new Date();
            const timeString = now.toLocaleString('zh-CN', {
                  year:'numeric', month:'2-digit', day:'2-digit',
                  hour:'2-digit', minute:'2-digit', second:'2-digit',
                  hour12:false
            }).replace(/\//g,'-');
            document.getElementById('currentTime').textContent = timeString;
            // çˆ¶äº²æ—¶é—´è½´
            const fatherTotal = endTime - startTime;
            const fatherElapsed = now - startTime;
            const fatherPercent = Math.min(Math.max(fatherElapsed / fatherTotal, 0), 1);
            document.getElementById('progressFillFather').style.width = (fatherPercent * 100) + '%';
            const [ fy, fm, fd, fh, fmin, fs ] = returnnyrsfm(now, fatherBirth);
            const [ fmy, fmm, fmd, fmh, fmmin, fms ] = returnnyrsfm(now, startTime);
            document.getElementById('fatherElapsed').textContent = `èµ°è¿‡ï¼š${fy}å¹´ ${fm}æœˆ ${fd}æ—¥ ${fh}æ—¶ ${fmin}åˆ† ${fs}ç§’ é™ªä¼´ï¼š${fmy}å¹´ ${fmm}æœˆ ${fmd}æ—¥ ${fmh}æ—¶ ${fmmin}åˆ† ${fms}ç§’`;
            // æ¯äº²æ—¶é—´è½´
            const motherTotal = endTime - startTime;
            const motherElapsed = now - startTime;
            const motherPercent = Math.min(Math.max(motherElapsed / motherTotal, 0), 1);
            document.getElementById('progressFillMother').style.width = (motherPercent * 100) + '%';
            const [ my, mm, md, mh, mmin, ms ] = returnnyrsfm(now, motherBirth);
            const [ mmy, mmm, mmd, mmh, mmmin, mms ] = returnnyrsfm(now, startTime);
            document.getElementById('motherElapsed').textContent = `èµ°è¿‡ï¼š${my}å¹´ ${mm}æœˆ ${md}æ—¥ ${mh}æ—¶ ${mmin}åˆ† ${ms}ç§’ é™ªä¼´ï¼š${mmy}å¹´ ${mmm}æœˆ ${mmd}æ—¥ ${mmh}æ—¶ ${mmmin}åˆ† ${mms}ç§’`;
            /*ä¸»è¿›åº¦æ¡ (1991-02-01 åˆ° 2091-02-01) */
            const total = endTime - startTime;
            const elapsed = now - startTime;
            const percent = Math.min(Math.max(elapsed / total, 0), 1);
            document.getElementById('progressFill').style.width = (percent * 100) + '%';
            // å½“å‰åœ¨ç¬¬äºŒæ¡æ—¶é—´è½´ä¸Šçš„è¿›åº¦
            const secondaryStartPercent = (secondaryStartTime - startTime) / total;
            const elapsed2 = now - secondaryStartTime;
            const percent2 = Math.min(Math.max(elapsed2 / total, 0), 1);
            const leftPos2 = secondaryStartPercent * 100;
            const tertiaryStartPercent = (tertiaryStartTime - startTime) / total;
            const elapsed3 = now - tertiaryStartTime;
            const percent3 = Math.min(Math.max(elapsed3 / total, 0), 1);
            const leftPos3 = tertiaryStartPercent * 100;
            const secondaryFill = document.getElementById('progressFillSecondary');
            secondaryFill.style.left = leftPos2 + '%';
            secondaryFill.style.width = (percent2 * 100) + '%';
            const tertiaryFill = document.getElementById('progressFillTertiary');
            tertiaryFill.style.left = leftPos3 + '%';
            tertiaryFill.style.width = (percent3 * 100) + '%';
            const [ y, m, d, h, min, s ] = returnnyrsfm(now, startTime);
            const [ y2, m2, d2, h2, min2, s2 ] = returnnyrsfm(now, secondaryStartTime);
            const [ y3, m3, d3, h3, min3, s3 ] = returnnyrsfm(now, tertiaryStartTime);
            document.getElementById('elapsedTime').textContent = `èµ°è¿‡ï¼š${y}å¹´ ${m}æœˆ ${d}æ—¥ ${h}æ—¶ ${min}åˆ† ${s}ç§’`;
            document.getElementById('elapsedTime2').textContent = `é™ªä¼´ï¼š${y2}å¹´ ${m2}æœˆ ${d2}æ—¥ ${h2}æ—¶ ${min2}åˆ† ${s2}ç§’`;
            document.getElementById('elapsedTime3').textContent = `é™ªä¼´ï¼š${y3}å¹´ ${m3}æœˆ ${d3}æ—¥ ${h3}æ—¶ ${min3}åˆ† ${s3}ç§’`;
        }


        /* ===== äº‹ä»¶å€’è®¡æ—¶ ====== */
        function renderEvents() {
            const today = new Date();
            today.setHours(0,0,0,0);
            const box = document.getElementById('eventList');
            box.innerHTML = '';
            if(typeof eventday_data !== 'undefined') {
                eventday_data
                    .map(([ds,txt])=>{
                        const t = new Date(ds+'T00:00:00');
                        const daysLeft = Math.ceil((t - today)/86400000);
                        return {date:ds,text:txt,days:daysLeft};
                    })
                    .filter(e=>e.days>=0)
                    .sort((a,b)=>a.days-b.days)
                    .slice(0,6)
                    .forEach(e=>{
                        const div = document.createElement('div');
                        div.className = 'stat-item';
                        div.innerHTML = `
                            <div class="stat-value">${e.days}</div>
                            <div class="stat-label">${e.text}</div>`;
                        box.appendChild(div);
                    });
            }
        }


        /* ---------- ç”Ÿæ—¥æé†’ï¼ˆé€‚é…ç°æœ‰ birthday_dataï¼‰ ---------- */
        function zero(n){return n<10?'0'+n:n;}
        function getBirthdayList(){
            const today=new Date();
            const y=today.getFullYear();
            const m=zero(today.getMonth()+1);
            const d=zero(today.getDate());
            const mmdd=m+'-'+d;
            const yesterday=new Date(today);
            yesterday.setDate(yesterday.getDate()-1);
            const yy=zero(yesterday.getMonth()+1);
            const dd=zero(yesterday.getDate());
            const yMd=yy+'-'+dd;
            const tomorrow=new Date(today);
            tomorrow.setDate(tomorrow.getDate()+1);
            const ty=zero(tomorrow.getMonth()+1);
            const td=zero(tomorrow.getDate());
            const tMd=ty+'-'+td;
            const pick=md=>{
                const [M,D]=md.split('-').map(Number);
                return birthday_data[M] && birthday_data[M][D] ? birthday_data[M][D] : [];
            };
            const yList   = pick(yMd);
            const todayList= pick(mmdd);
            const tList   = pick(tMd);
            const box=document.getElementById('birthdayBox');
            box.innerHTML=`
                <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
                    <span style="white-space:pre">æ˜¨æ—¥ï¼š</span><span>${yList.length?yList.join('ã€'):'â€”â€”'}</span>
                </div>
                <div style="display:flex;font-family:monospace;font-size:1.1rem;line-height:1.6;color:#e67e22;font-weight:bold;margin:4px 0;">
                    <span style="white-space:pre">ä»Šæ—¥ï¼š</span><span>${todayList.length?todayList.join('ã€'):'â€”â€”'}</span>
                </div>
                <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
                    <span style="white-space:pre">æ˜æ—¥ï¼š</span><span>${tList.length?tList.join('ã€'):'â€”â€”'}</span>
                </div>
            `;
        }

        function getWealth(){
            function sumArr(arr) { return arr.reduce((s,[,,v])=>s+(v||0),0); }
            if(typeof assets_data === 'undefined' || typeof liability_data === 'undefined') return;
            const assetTotal = sumArr(assets_data);
            const liabTotal  = sumArr(liability_data);
            const netWorth   = assetTotal - liabTotal;
            document.getElementById('compactBalance').innerHTML = `
                <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
                    <span>æ€»èµ„äº§</span>
                    <span style="font-weight:bold;color:#3498db;">${assetTotal.toFixed(2)}</span>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
                    <span>æ€»è´Ÿå€º</span>
                    <span style="font-weight:bold;color:#e67e22;">${liabTotal.toFixed(2)}</span>
                </div>
                <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
                    <span>å‡€èµ„äº§</span>
                    <span style="font-weight:bold;color:#2ecc71;">${netWorth.toFixed(2)}</span>
                </div>
            `;
        }

        function getWealthggh(){
            function sumArr(arr) { return arr.reduce((s,[,,v])=>s+(v||0),0); }
            if(typeof assets_ggh_data === 'undefined' || typeof liability_ggh_data === 'undefined') return;

            const assetTotal = sumArr(assets_ggh_data);
            const liabTotal  = sumArr(liability_ggh_data);
            const netWorth   = assetTotal - liabTotal;
            document.getElementById('compactBalanceggh').innerHTML = `
              <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
                <span>æ€»èµ„äº§</span>
                <span style="font-weight:bold;color:#3498db;">${assetTotal.toFixed(2)}</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
                <span>æ€»è´Ÿå€º</span>
                <span style="font-weight:bold;color:#e67e22;">${liabTotal.toFixed(2)}</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
                <span>å‡€èµ„äº§</span>
                <span style="font-weight:bold;color:#2ecc71;">${netWorth.toFixed(2)}</span>
              </div>
            `;
        }

        /* ========== å¹´åº¦æ€»ç»“ æ–‡å­—äº‘ï¼ˆä»…æœ€æ–°3å¹´ï¼‰ ========== */
        function renderSummaryCloud(){
            if(typeof summarydata === 'undefined') return;
            const cloudBox = document.getElementById('summaryCloud');
            cloudBox.innerHTML = '';
            Object.keys(summarydata)
                  .sort((a,b)=>b-a)
                  .slice(0,12)
                  .forEach(yr=>{
                      const title = summarydata[yr].title || '';
                      if(!title) return;
                      const span = document.createElement('span');
                      span.textContent = title;
                      const fs = 14 + Math.random()*14;
                      const hue = 200 + Math.random()*160;
                      span.style.cssText = `
                          font-size : ${fs.toFixed(0)}px;
                          color     : hsl(${hue},70%,50%);
                          margin    : 0 6px;
                      `;
                      cloudBox.appendChild(span);
                  });
        }

        /* ===== æŠ•èµ„ç»„åˆæ¸²æŸ“ ===== */
        function renderPortfolio(){
          if(typeof period === 'undefined' || typeof returnRate === 'undefined') return;
          const [start, end] = period.split(' - ');
          document.getElementById('periodText').innerHTML = `${start}<br>${end}`;
          document.getElementById('returnText').textContent = returnRate;
        }

        // æ›´æ–°ç»Ÿè®¡
        function updateStats() {
            if(typeof geoData === 'undefined') return;

            let countries = 0, cities = 0, spots = 0;
            function count(node) {
                if (node.type === 'country') countries++;
                else if (node.type === 'city') cities++;
                else if (node.type === 'spot') spots++;
                if (node.children) node.children.forEach(count);
            }
            geoData.forEach(count);
            document.getElementById('stat-countries').textContent = countries;
            document.getElementById('stat-cities').textContent = cities;
            document.getElementById('stat-spots').textContent = spots;
        }

        /* ===== æµ·å¤–èµ„äº§æ¸²æŸ“ï¼ˆè¶…ç´§å‡‘ç‰ˆï¼‰ ===== */
        async function renderOverseas(){
            const TARGET = CONFIG.targetEUR;
            // ç®€åŒ–ç›®æ ‡æ˜¾ç¤ºä¸º 500k æ ¼å¼
            const targetK = (TARGET / 1000).toFixed(0);
            document.getElementById('overseasTarget').textContent = targetK + 'k';
            try {
                // è·å–å®æ—¶æ±‡ç‡ (ä»¥EURä¸ºåŸºå‡†)
                const response = await fetch(`https://v6.exchangerate-api.com/v6/${CONFIG.apiKey}/latest/EUR`);
                const data = await response.json();

                if (data.result !== 'success') {
                    throw new Error('æ±‡ç‡è·å–å¤±è´¥: ' + data['error-type']);
                }
                const rates = data.conversion_rates;
                let totalEUR = 0;
                // è®¡ç®—å„è´§å¸æŠ˜åˆEURçš„æ€»å’Œ
                for (const [currency, info] of Object.entries(CONFIG.holdings)) {
                    const rate = rates[currency];
                    if (rate) {
                        totalEUR += info.amount / rate;
                    }
                }
                const current = totalEUR;
                const percentage = Math.min((current / TARGET) * 100, 100);

                // æ›´æ–°æ—¶é—´ï¼ˆåªæ˜¾ç¤ºæ—¶é—´ï¼Œæ›´ç´§å‡‘ï¼‰
                const updateTime = new Date(data.time_last_update_utc).toLocaleTimeString('zh-CN', {
                    year: '2-digit',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit',
                    hour12: false
                });
                // åŠ¨ç”»æ›´æ–°è¿›åº¦æ¡ï¼ˆå®½åº¦åŒ…å«æœ€å°å€¼ç¡®ä¿æ–‡å­—å¯è§ï¼‰
                setTimeout(() => {
                    const displayWidth = Math.max(percentage, 8);
                    document.getElementById('overseasBarFill').style.width = displayWidth + '%';
                }, 100);
                let amountText;
                if (current >= 1000) {
                    amountText = 'â‚¬' + (current / 1000).toFixed(2) + 'k';
                } else {
                    amountText = 'â‚¬' + current.toFixed(2);
                }
                document.getElementById('overseasCurrent').textContent = amountText;
                document.getElementById('overseasBarText').textContent = percentage.toFixed(1) + '%';
                document.getElementById('overseasMeta').textContent = "æ›´æ–°æ—¶é—´ï¼š"+updateTime;
            } catch (error) {
                console.error('è·å–æ±‡ç‡å¤±è´¥:', error);
                document.getElementById('overseasCurrent').textContent = 'é”™è¯¯';
                document.getElementById('overseasCurrent').style.color = '#e74c3c';
                document.getElementById('overseasBarText').textContent = '--';
                document.getElementById('overseasMeta').textContent = 'æ›´æ–°å¤±è´¥';

                const fallbackTotal = 25000;
                const percentage = Math.min((fallbackTotal / TARGET) * 100, 100);
                document.getElementById('overseasBarFill').style.width = Math.max(percentage, 8) + '%';
            }
        }

        /* ===== ä½“é‡è®°å½•æ¸²æŸ“ ===== */
        function renderWeight(){
            if(typeof weight_data === 'undefined' || weight_data.length === 0) return;
            const parsed = weight_data.map(([date, weight]) => ({
                date: date,
                weight: parseFloat(weight)
            }));
            const latest = parsed[parsed.length - 1];
            const max = parsed.reduce((prev, curr) => prev.weight > curr.weight ? prev : curr);
            const min = parsed.reduce((prev, curr) => prev.weight < curr.weight ? prev : curr);
            document.getElementById('weight-latest').textContent = latest.weight.toFixed(1);
            document.getElementById('weight-date').textContent = latest.date + ' æœ€æ–°';
            document.getElementById('weight-max').textContent = max.weight.toFixed(1);
            document.getElementById('weight-min').textContent = min.weight.toFixed(1);
        }


        document.getElementById('eventdayModule').addEventListener('click', () => {
            window.open('calendar/index.html', '_blank');
        });
        document.getElementById('birthdayModule').addEventListener('click', () => {
            window.open('birthday/index.html', '_blank');
        });
        document.getElementById('wealthModule').addEventListener('click', () => {
            window.open('wealth/index.html', '_blank');
        });
        document.getElementById('wealthgghModule').addEventListener('click', () => {
            window.open('wealthggh/index.html', '_blank');
        });
        document.getElementById('summaryModule').addEventListener('click',()=>{
            window.open('summary/index.html','_blank');
        });
        document.getElementById('resumeModule').addEventListener('click',()=>{
            window.open('cv/index.html','_blank');
        });
        document.getElementById('portfolioModule').addEventListener('click', () => {
            window.open('portfolio/index.html', '_blank');
        });
        document.getElementById('footprintModule').addEventListener('click', () => {
            window.open('footprint/index.html', '_blank');
        });
        document.getElementById('overseasModule').addEventListener('click', () => {
            window.open('overseas/index.html', '_blank');
        });
        document.getElementById('weightModule').addEventListener('click', () => {
            window.open('weight/index.html', '_blank');
        });
        document.getElementById('blogModule').addEventListener('click', () => {
            window.open('blog/index.html', '_blank');
        });

        updateMainDisplay();
        renderEvents();
        getBirthdayList();
        getWealth();
        getWealthggh();
        renderSummaryCloud();
        renderPortfolio();
        updateStats();
        renderOverseas();
        renderWeight();

        setInterval(updateMainDisplay, 1000);

    </script>

</body>
</html>