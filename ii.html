<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™¾å¹´æ—¶å…‰è½´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #d9e4f7 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
        }

        .timeline-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .timeline-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .timeline-header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .main-time {
            font-size: 2rem;
            color: #34495e;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .modules-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .module {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .module h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .module-content {
            color: #5a6c7d;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }

/* ===== ç®€å†å¾®å¡ç‰‡ ===== */
.resume-grid{
display:grid;
grid-template-columns:repeat(3,1fr);
gap:12px;
margin-top:12px;
}
.resume-grid .stat-item{
background:#f8f9fa;
padding:12px 4px;
border-radius:8px;
text-align:center;
}
.resume-grid .stat-value{font-size:1.15rem;font-weight:600;color:#2c3e50;}
.resume-grid .stat-label{font-size:.8rem;color:#7f8c8d;margin-top:4px;}


    </style>
</head>
<body>
    <div class="container">
        <div class="timeline-container">
            <div class="timeline-header">
                <h1>äººç”Ÿç™¾å¹´</h1>
                <div class="main-time" id="currentTime">1991-02-01 15:05:00</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="elapsedTime">å·²è¿‡å»ï¼š0ç§’</span>
                    <span></span>
                </div>
            </div>


      
        </div>

        <div class="modules-container">

<div class="module" id="eventdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“… å³å°†æ¥åˆ°çš„äº‹ä»¶</h3>
    <div class="stats-grid" id="eventList">
        <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

<div class="module" id="birthdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ‚ ç”Ÿæ—¥æé†’</h3>
    <div class="module-content" id="birthdayBox">
        <!-- JS åŠ¨æ€ç”Ÿæˆ -->
    </div>
</div>

<!-- èµ„äº§è´Ÿå€ºç´§å‡‘è¡Œ -->
<div class="module" id="wealthModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“Š èµ„äº§è´Ÿå€º-TH</h3>
    <!-- ç´§å‡‘è¡Œï¼švalue + label åŒèˆª -->
    <div id="compactBalance" style="line-height:1.6;font-size:1.05rem;color:#5a6c7d;">
      <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

<!-- èµ„äº§è´Ÿå€ºç´§å‡‘è¡Œ -->
<div class="module" id="wealthgghModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“Š èµ„äº§è´Ÿå€º-GGH</h3>
    <!-- ç´§å‡‘è¡Œï¼švalue + label åŒèˆª -->
    <div id="compactBalanceggh" style="line-height:1.6;font-size:1.05rem;color:#5a6c7d;">
      <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

<!-- å¹´åº¦æ€»ç»“ æ–‡å­—äº‘ -->
<div class="module" id="summaryModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“” å¹´åº¦æ€»ç»“</h3>
    <div id="summaryCloud" style="line-height:1.8; text-align:center; padding:10px 0;"></div>
</div>

<!-- ä¸ªäººç®€å† -->
<div class="module" id="resumeModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
  <h3>ğŸ“‹ ä¸ªäººç®€å†</h3>
  <div class="module-content resume-grid">
    <div class="stat-item">
      <div class="stat-value">7+</div>
      <div class="stat-label">å¹´ç»éªŒ</div>
    </div>
    <div class="stat-item">
      <div class="stat-value">CFA</div>
      <div class="stat-label">æŒè¯äºº</div>
    </div>
    <div class="stat-item">
      <div class="stat-value">è·¨é¢†åŸŸ</div>
      <div class="stat-label">ç”Ÿç‰©Â·è®¡ç®—Â·é‡‘è</div>
    </div>
  </div>
</div>

<!-- æŠ•èµ„ç»„åˆæ¨¡å— -->
<div class="module" id="portfolioModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
  <h3>ğŸ“ˆ æŠ•èµ„ç»„åˆ</h3>
  <div class="module-content" style="display:flex;justify-content:center;gap:65px;font-size:1.2rem;">
    <div style="text-align:center;">
      <strong>æŠ•èµ„å‘¨æœŸ</strong>
      <div id="periodText" style="color:#3498db;font-weight:bold;line-height:1.2;"></div>
    </div>
    <div style="text-align:center;">
      <strong>å¹´åŒ–æ”¶ç›Šç‡</strong>
      <div id="returnText" style="color:#2ecc71;font-weight:bold;line-height:1.2;font-size:1.3rem;"></div>
    </div>
  </div>
</div>

<!-- è¶³è¿¹æ¨¡å— -->
<div class="module" id="footprintModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸŒ è¶³è¿¹</h3>
    <div class="stats-grid">
        <div class="stat-item">
            <div class="stat-value" id="stat-countries">0</div>
            <div class="stat-label">å›½å®¶</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="stat-cities">0</div>
            <div class="stat-label">åŸå¸‚</div>
        </div>
        <div class="stat-item">
            <div class="stat-value" id="stat-spots">0</div>
            <div class="stat-label">æ™¯ç‚¹</div>
        </div>
    </div>
</div>


        </div>
    </div>

<script src="calendar/data.js"></script>
<script src="birthday/data.js"></script>
<script src="wealth/data.js"></script>
<script src="wealthggh/data.js"></script>
<script src="summary/data.js"></script>
<script src="portfolio/data.js"></script>
<script src="footprint/data.js"></script>

<script>
/* =========================
   ç™¾å¹´æ—¶å…‰è½´ä¸»é€»è¾‘
   ========================= */
const startTime = new Date('1991-02-01T15:05:00');
const endTime   = new Date('2091-02-01T15:05:00');

/* -------- ä¸»åˆ·æ–° -------- */
function updateMainDisplay() {
  const now = new Date();

  /* 1. å¤§è¡¨ç›˜ */
  const timeString = now.toLocaleString('zh-CN', {
    year:'numeric', month:'2-digit', day:'2-digit',
    hour:'2-digit', minute:'2-digit', second:'2-digit',
    hour12:false
  }).replace(/\//g,'-');
  document.getElementById('currentTime').textContent = timeString;

  /* 2. è¿›åº¦æ¡ */
  const total = endTime - startTime;
  const elapsed = now - startTime;
  const percent = Math.min(Math.max(elapsed / total, 0), 1);
  document.getElementById('progressFill').style.width = (percent * 100) + '%';

  /* 3. å·²èµ°æ—¶é•¿ */
  let y = now.getFullYear()  - startTime.getFullYear();
  let m = now.getMonth()     - startTime.getMonth();
  let d = now.getDate()      - startTime.getDate();
  let h = now.getHours()     - startTime.getHours();
  let min=now.getMinutes()   - startTime.getMinutes();
  let s =now.getSeconds()    - startTime.getSeconds();

  if(s <0){s+=60;min--;}
  if(min<0){min+=60;h--;}
  if(h<0){h+=24;d--;}
  if(d<0){
    const prev = new Date(now.getFullYear(), now.getMonth(), 0);
    d += prev.getDate();
    m--;
  }
  if(m<0){m+=12;y--;}

  document.getElementById('elapsedTime').textContent =
    `å·²è¿‡å»ï¼š${y}å¹´ ${m}æœˆ ${d}æ—¥ ${h}æ—¶ ${min}åˆ† ${s}ç§’`;

}


/* =========================
   äº‹ä»¶å€’è®¡æ—¶
   ========================= */

function renderEvents() {
  const today = new Date();
  today.setHours(0,0,0,0);
  const box = document.getElementById('eventList');
  box.innerHTML = '';

  eventday_data
    .map(([ds,txt])=>{
      const t = new Date(ds+'T00:00:00');
      const daysLeft = Math.ceil((t - today)/86400000);
      return {date:ds,text:txt,days:daysLeft};
    })
    .filter(e=>e.days>=0)
    .sort((a,b)=>a.days-b.days)
    .slice(0,6)
    .forEach(e=>{
      const div = document.createElement('div');
      div.className = 'stat-item';
      div.innerHTML = `
        <div class="stat-value">${e.days}</div>
        <div class="stat-label">${e.text}</div>`;
      box.appendChild(div);
    });
}


/* ---------- ç”Ÿæ—¥æé†’ï¼ˆé€‚é…ç°æœ‰ birthday_dataï¼‰ ---------- */
function zero(n){return n<10?'0'+n:n;}

function getBirthdayList(){
  const today=new Date();
  const y=today.getFullYear();
  const m=zero(today.getMonth()+1);
  const d=zero(today.getDate());
  const mmdd=m+'-'+d;

  const yesterday=new Date(today);
  yesterday.setDate(yesterday.getDate()-1);
  const yy=zero(yesterday.getMonth()+1);
  const dd=zero(yesterday.getDate());
  const yMd=yy+'-'+dd;

  const tomorrow=new Date(today);
  tomorrow.setDate(tomorrow.getDate()+1);
  const ty=zero(tomorrow.getMonth()+1);
  const td=zero(tomorrow.getDate());
  const tMd=ty+'-'+td;

  /* ä» birthday_data é‡Œæ‹¿åå• */
  const pick=md=>{
    const [M,D]=md.split('-').map(Number);
    return birthday_data[M] && birthday_data[M][D] ? birthday_data[M][D] : [];
  };

  const yList   = pick(yMd);
  const todayList= pick(mmdd);
  const tList   = pick(tMd);

  /* æ¸²æŸ“ */
  const box=document.getElementById('birthdayBox');
box.innerHTML=`
  <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
    <span style="white-space:pre">æ˜¨æ—¥ï¼š</span><span>${yList.length?yList.join('ã€'):'â€”â€”'}</span>
  </div>
  <div style="display:flex;font-family:monospace;font-size:1.1rem;line-height:1.6;color:#e67e22;font-weight:bold;margin:4px 0;">
    <span style="white-space:pre">ä»Šæ—¥ï¼š</span><span>${todayList.length?todayList.join('ã€'):'â€”â€”'}</span>
  </div>
  <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
    <span style="white-space:pre">æ˜æ—¥ï¼š</span><span>${tList.length?tList.join('ã€'):'â€”â€”'}</span>
  </div>
`;
}

function getWealth(){
    /* â€”â€” æ±‚å’Œ â€”â€” */
    function sumArr(arr) { return arr.reduce((s,[,,v])=>s+(v||0),0); }
    const assetTotal = sumArr(assets_data);
    const liabTotal  = sumArr(liability_data);
    const netWorth   = assetTotal - liabTotal;
    
    /* â€”â€” ç´§å‡‘è¡Œæ¸²æŸ“ â€”â€” */
    document.getElementById('compactBalance').innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»èµ„äº§</span>
        <span style="font-weight:bold;color:#3498db;">${assetTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»è´Ÿå€º</span>
        <span style="font-weight:bold;color:#e67e22;">${liabTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>å‡€èµ„äº§</span>
        <span style="font-weight:bold;color:#2ecc71;">${netWorth.toFixed(2)}</span>
      </div>
    `;
}

function getWealthggh(){
    /* â€”â€” æ±‚å’Œ â€”â€” */
    function sumArr(arr) { return arr.reduce((s,[,,v])=>s+(v||0),0); }
    const assetTotal = sumArr(assets_ggh_data);
    const liabTotal  = sumArr(liability_ggh_data);
    const netWorth   = assetTotal - liabTotal;
    
    /* â€”â€” ç´§å‡‘è¡Œæ¸²æŸ“ â€”â€” */
    document.getElementById('compactBalanceggh').innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»èµ„äº§</span>
        <span style="font-weight:bold;color:#3498db;">${assetTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»è´Ÿå€º</span>
        <span style="font-weight:bold;color:#e67e22;">${liabTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>å‡€èµ„äº§</span>
        <span style="font-weight:bold;color:#2ecc71;">${netWorth.toFixed(2)}</span>
      </div>
    `;
}

/* ========== å¹´åº¦æ€»ç»“ æ–‡å­—äº‘ï¼ˆä»…æœ€æ–°3å¹´ï¼‰ ========== */
function renderSummaryCloud(){
    if(typeof summarydata === 'undefined') return;
    const cloudBox = document.getElementById('summaryCloud');
    cloudBox.innerHTML = '';
    /* é™åºåå–å‰3 */
    Object.keys(summarydata)
          .sort((a,b)=>b-a)
          .slice(0,12)
          .forEach(yr=>{
              const title = summarydata[yr].title || '';
              if(!title) return;
              const span = document.createElement('span');
              span.textContent = title;
              const fs = 14 + Math.random()*14;
              const hue = 200 + Math.random()*160;
              span.style.cssText = `
                  font-size : ${fs.toFixed(0)}px;
                  color     : hsl(${hue},70%,50%);
                  margin    : 0 6px;
              `;
              cloudBox.appendChild(span);
          });
}

/* ===== æŠ•èµ„ç»„åˆæ¸²æŸ“ ===== */
function renderPortfolio(){
  const [start, end] = period.split(' - ');
  document.getElementById('periodText').innerHTML = `${start}<br>${end}`;
  document.getElementById('returnText').textContent = returnRate;
}

// æ›´æ–°ç»Ÿè®¡
function updateStats() {
    let countries = 0, cities = 0, spots = 0;
    function count(node) {
        if (node.type === 'country') countries++;
        else if (node.type === 'city') cities++;
        else if (node.type === 'spot') spots++;
        if (node.children) node.children.forEach(count);
    }
    geoData.forEach(count);
    document.getElementById('stat-countries').textContent = countries;
    document.getElementById('stat-cities').textContent = cities;
    document.getElementById('stat-spots').textContent = spots;
}


/* ===== ç‚¹å‡»è·³è½¬ ===== */
document.getElementById('eventdayModule').addEventListener('click', () => {
    window.open('calendar/index.html', '_blank');
});
document.getElementById('birthdayModule').addEventListener('click', () => {
    window.open('birthday/index.html', '_blank');
});
document.getElementById('wealthModule').addEventListener('click', () => {
    window.open('wealth/index.html', '_blank');
});
document.getElementById('wealthgghModule').addEventListener('click', () => {
    window.open('wealthggh/index.html', '_blank');
});
document.getElementById('summaryModule').addEventListener('click',()=>{
    window.open('summary/index.html','_blank');
});
document.getElementById('resumeModule').addEventListener('click',()=>{
window.open('cv/index.html','_blank');
});
document.getElementById('portfolioModule').addEventListener('click', () => {
  window.open('portfolio/index.html', '_blank');
});
document.getElementById('footprintModule').addEventListener('click', () => {
    window.open('footprint/index.html', '_blank');
});

/* =========================
   å¯åŠ¨å®šæ—¶å™¨
   ========================= */
updateMainDisplay();
renderEvents();
getBirthdayList();
getWealth();
getWealthggh();
renderSummaryCloud();
renderPortfolio();
updateStats();

setInterval(updateMainDisplay, 1000);
</script>

</body>
</html>