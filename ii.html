<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™¾å¹´æ—¶å…‰è½´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #d9e4f7 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
        }

        .timeline-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .timeline-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .timeline-header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .main-time {
            font-size: 2rem;
            color: #34495e;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .modules-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .module {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .module h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .module-content {
            color: #5a6c7d;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="timeline-container">
            <div class="timeline-header">
                <h1>äººç”Ÿç™¾å¹´</h1>
                <div class="main-time" id="currentTime">1991-02-01 15:05:00</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="elapsedTime">å·²è¿‡å»ï¼š0ç§’</span>
                    <span></span>
                </div>
            </div>
        </div>

        <div class="modules-container">

<div class="module" id="eventdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“… å³å°†æ¥åˆ°çš„äº‹ä»¶</h3>
    <div class="stats-grid" id="eventList">
        <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

<div class="module" id="birthdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ‚ ç”Ÿæ—¥æé†’</h3>
    <div class="module-content" id="birthdayBox">
        <!-- JS åŠ¨æ€ç”Ÿæˆ -->
    </div>
</div>

            <div class="module">
                <h3>â° æ—¶é—´é‡Œç¨‹ç¢‘</h3>
                <div class="module-content">
                    <div id="milestones">
                        <p>ğŸ‰ ç¬¬1å¤© - 1991å¹´2æœˆ2æ—¥</p>
                        <p>ğŸ“… ç¬¬1å¹´ - 1992å¹´2æœˆ1æ—¥</p>
                        <p>ğŸŒŸ ç¬¬10å¹´ - 2001å¹´2æœˆ1æ—¥</p>
                        <p>ğŸ¯ ç¬¬25å¹´ - 2016å¹´2æœˆ1æ—¥</p>
                        <p>ğŸ† ç¬¬50å¹´ - 2041å¹´2æœˆ1æ—¥</p>
                    </div>
                </div>
            </div>

            <div class="module">
                <h3>ğŸŒˆ æ—¶é—´æ„Ÿæ‚Ÿ</h3>
                <div class="module-content">
                    <p id="timeQuote">æ—¶é—´å¦‚æµæ°´ï¼Œæ¯ä¸€ç§’éƒ½æ˜¯çè´µçš„ç¬é—´ã€‚</p>
                    <p style="margin-top: 10px; font-style: italic; color: #95a5a6;">"ç™¾å¹´æ—¶å…‰ï¼Œè½¬ç¬å³é€ï¼Œçæƒœå½“ä¸‹ï¼Œæ´»åœ¨å½“ä¸‹ã€‚"</p>
                </div>
            </div>
        </div>
    </div>

<script src="eventday/data.js"></script>
<script src="birthday/data.js"></script>

<script>
/* =========================
   ç™¾å¹´æ—¶å…‰è½´ä¸»é€»è¾‘
   ========================= */
const startTime = new Date('1991-02-01T15:05:00');
const endTime   = new Date('2091-02-01T15:05:00');

const quotes = [
  "æ—¶é—´å¦‚æµæ°´ï¼Œæ¯ä¸€ç§’éƒ½æ˜¯çè´µçš„ç¬é—´ã€‚",
  "ç™¾å¹´å…‰é˜´ï¼Œè§è¯æ—¶ä»£çš„å˜è¿ã€‚",
  "æ¯ä¸€ç§’éƒ½åœ¨ä¹¦å†™å†å²ï¼Œæ¯ä¸€åˆ»éƒ½å€¼å¾—é“­è®°ã€‚",
  "æ—¶å…‰èè‹’ï¼Œå²æœˆå¦‚æ­Œã€‚",
  "ç™¾å¹´æ—¶å…‰è½´ï¼Œè®°å½•æ°¸æ’çš„è®°å¿†ã€‚",
  "æ—¶é—´æ˜¯æœ€å…¬å¹³çš„ï¼Œæ¯ä¸ªäººæ¯å¤©éƒ½æ‹¥æœ‰86400ç§’ã€‚",
  "ç™¾å¹´ä¸€ç¬ï¼Œçæƒœå½“ä¸‹ã€‚"
];

/* -------- ä¸»åˆ·æ–° -------- */
function updateMainDisplay() {
  const now = new Date();

  /* 1. å¤§è¡¨ç›˜ */
  const timeString = now.toLocaleString('zh-CN', {
    year:'numeric', month:'2-digit', day:'2-digit',
    hour:'2-digit', minute:'2-digit', second:'2-digit',
    hour12:false
  }).replace(/\//g,'-');
  document.getElementById('currentTime').textContent = timeString;

  /* 2. è¿›åº¦æ¡ */
  const total = endTime - startTime;
  const elapsed = now - startTime;
  const percent = Math.min(Math.max(elapsed / total, 0), 1);
  document.getElementById('progressFill').style.width = (percent * 100) + '%';

  /* 3. å·²èµ°æ—¶é•¿ */
  let y = now.getFullYear()  - startTime.getFullYear();
  let m = now.getMonth()     - startTime.getMonth();
  let d = now.getDate()      - startTime.getDate();
  let h = now.getHours()     - startTime.getHours();
  let min=now.getMinutes()   - startTime.getMinutes();
  let s =now.getSeconds()    - startTime.getSeconds();

  if(s <0){s+=60;min--;}
  if(min<0){min+=60;h--;}
  if(h<0){h+=24;d--;}
  if(d<0){
    const prev = new Date(now.getFullYear(), now.getMonth(), 0);
    d += prev.getDate();
    m--;
  }
  if(m<0){m+=12;y--;}

  document.getElementById('elapsedTime').textContent =
    `å·²è¿‡å»ï¼š${y}å¹´ ${m}æœˆ ${d}æ—¥ ${h}æ—¶ ${min}åˆ† ${s}ç§’`;

  /* 4. é‡Œç¨‹ç¢‘ */
  const mileDays = [1,365,3650,9125,18250];
  const mileText = ['ç¬¬1å¤©','ç¬¬1å¹´','ç¬¬10å¹´','ç¬¬25å¹´','ç¬¬50å¹´'];
  const mileDate = mileDays.map(n=>new Date(startTime.getTime()+n*864e5).toLocaleDateString('zh-CN'));
  const passedDays = Math.floor(elapsed/864e5);
  const mileHtml = mileDays.map((n,i)=>{
    const icon = passedDays>=n ? 'âœ…' : 'ğŸ“…';
    return `<p>${icon} ${mileText[i]} - ${mileDate[i]}</p>`;
  }).join('');
  document.getElementById('milestones').innerHTML = mileHtml;

  /* 5. éšæœºæ„Ÿæ‚Ÿï¼ˆæ¯åˆ†é’Ÿæ¢ä¸€æ¬¡ï¼‰ */
  if(now.getSeconds()===0){
    document.getElementById('timeQuote').textContent =
      quotes[Math.floor(Math.random()*quotes.length)];
  }
}

/* =========================
   äº‹ä»¶å€’è®¡æ—¶
   ========================= */

function renderEvents() {
  const today = new Date();
  today.setHours(0,0,0,0);
  const box = document.getElementById('eventList');
  box.innerHTML = '';

  eventday_data
    .map(([ds,txt])=>{
      const t = new Date(ds+'T00:00:00');
      const daysLeft = Math.ceil((t - today)/86400000);
      return {date:ds,text:txt,days:daysLeft};
    })
    .filter(e=>e.days>=0)
    .sort((a,b)=>a.days-b.days)
    .slice(0,6)
    .forEach(e=>{
      const div = document.createElement('div');
      div.className = 'stat-item';
      div.innerHTML = `
        <div class="stat-value">${e.days}</div>
        <div class="stat-label">${e.text}</div>`;
      box.appendChild(div);
    });
}


/* ---------- ç”Ÿæ—¥æé†’ï¼ˆé€‚é…ç°æœ‰ birthday_dataï¼‰ ---------- */
function zero(n){return n<10?'0'+n:n;}

function getBirthdayList(){
  const today=new Date();
  const y=today.getFullYear();
  const m=zero(today.getMonth()+1);
  const d=zero(today.getDate());
  const mmdd=m+'-'+d;

  const yesterday=new Date(today);
  yesterday.setDate(yesterday.getDate()-1);
  const yy=zero(yesterday.getMonth()+1);
  const dd=zero(yesterday.getDate());
  const yMd=yy+'-'+dd;

  const tomorrow=new Date(today);
  tomorrow.setDate(tomorrow.getDate()+1);
  const ty=zero(tomorrow.getMonth()+1);
  const td=zero(tomorrow.getDate());
  const tMd=ty+'-'+td;

  /* ä» birthday_data é‡Œæ‹¿åå• */
  const pick=md=>{
    const [M,D]=md.split('-').map(Number);
    return birthday_data[M] && birthday_data[M][D] ? birthday_data[M][D] : [];
  };

  const yList   = pick(yMd);
  const todayList= pick(mmdd);
  const tList   = pick(tMd);

  /* æ¸²æŸ“ */
  const box=document.getElementById('birthdayBox');
box.innerHTML=`
  <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
    <span style="white-space:pre">æ˜¨æ—¥ï¼š</span><span>${yList.length?yList.join('ã€'):'â€”â€”'}</span>
  </div>
  <div style="display:flex;font-family:monospace;font-size:1.1rem;line-height:1.6;color:#e67e22;font-weight:bold;margin:4px 0;">
    <span style="white-space:pre">ä»Šæ—¥ï¼š</span><span>${todayList.length?todayList.join('ã€'):'â€”â€”'}</span>
  </div>
  <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
    <span style="white-space:pre">æ˜æ—¥ï¼š</span><span>${tList.length?tList.join('ã€'):'â€”â€”'}</span>
  </div>
`;
}

/* ===== ç‚¹å‡»è·³è½¬ ===== */
document.getElementById('eventdayModule').addEventListener('click', () => {
    // æŠŠä¸‹é¢åœ°å€æ¢æˆä½ æƒ³æ‰“å¼€çš„å®é™…ç½‘å€
    window.open('calendar.html', '_blank');
});
document.getElementById('birthdayModule').addEventListener('click', () => {
    // æŠŠä¸‹é¢åœ°å€æ¢æˆä½ æƒ³æ‰“å¼€çš„å®é™…ç½‘å€
    window.open('birthday.html', '_blank');
});

/* =========================
   å¯åŠ¨å®šæ—¶å™¨
   ========================= */
updateMainDisplay();   // å…ˆåˆ·ä¸€æ¬¡
renderEvents();
getBirthdayList();

setInterval(updateMainDisplay, 1000);   // ä¸»æ—¶é—´ 1 ç§’
</script>
</body>
</html>