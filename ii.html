<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç™¾å¹´æ—¶å…‰è½´</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #d9e4f7 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1500px;
            margin: 0 auto;
        }

        .timeline-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .timeline-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .timeline-header h1 {
            color: #2c3e50;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .current-time {
            font-size: 1.2rem;
            color: #7f8c8d;
            margin-bottom: 20px;
        }

        .main-time {
            font-size: 2rem;
            color: #34495e;
            font-weight: 300;
            letter-spacing: 2px;
        }

        .progress-container {
            margin: 30px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #ecf0f1;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: width 0.3s ease;
            border-radius: 4px;
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }

        .modules-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .module {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .module:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .module h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .module-content {
            color: #5a6c7d;
            line-height: 1.6;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #3498db;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-top: 5px;
        }

        <!-- æ¡å½¢å›¾ä¸“å±æ ·å¼ -->
.bar-chart { font-size: 0.95rem; color: #5a6c7d; }
.bar-row { display: flex; align-items: center; margin: 8px 0; }
.bar-label { width: 44px; text-align: right; margin-right: 8px; }
.bar-track { flex: 1; height: 22px; background: #ecf0f1; border-radius: 4px; overflow: hidden; }
.bar-fill { height: 100%; border-radius: 4px; transition: width .4s; }
.asset-bar { background: linear-gradient(90deg, #3498db, #2ecc71); }
.liab-bar { background: linear-gradient(90deg, #e67e22, #f1c40f); }
.bar-num { width: 80px; text-align: right; font-weight: bold; margin-left: 8px; }

    </style>
</head>
<body>
    <div class="container">
        <div class="timeline-container">
            <div class="timeline-header">
                <h1>äººç”Ÿç™¾å¹´</h1>
                <div class="main-time" id="currentTime">1991-02-01 15:05:00</div>
            </div>
            
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-info">
                    <span></span>
                    <span id="elapsedTime">å·²è¿‡å»ï¼š0ç§’</span>
                    <span></span>
                </div>
            </div>
        </div>

        <div class="modules-container">

<div class="module" id="eventdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“… å³å°†æ¥åˆ°çš„äº‹ä»¶</h3>
    <div class="stats-grid" id="eventList">
        <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

<div class="module" id="birthdayModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ‚ ç”Ÿæ—¥æé†’</h3>
    <div class="module-content" id="birthdayBox">
        <!-- JS åŠ¨æ€ç”Ÿæˆ -->
    </div>
</div>

<!-- èµ„äº§è´Ÿå€ºç´§å‡‘è¡Œ -->
<div class="module" id="wealthModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“Š èµ„äº§è´Ÿå€º-TH</h3>
    <!-- ç´§å‡‘è¡Œï¼švalue + label åŒèˆª -->
    <div id="compactBalance" style="line-height:1.6;font-size:1.05rem;color:#5a6c7d;">
      <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

<!-- èµ„äº§è´Ÿå€ºç´§å‡‘è¡Œ -->
<div class="module" id="wealthgghModule" style="cursor:pointer;" title="ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…">
    <h3>ğŸ“Š èµ„äº§è´Ÿå€º-GGH</h3>
    <!-- ç´§å‡‘è¡Œï¼švalue + label åŒèˆª -->
    <div id="compactBalanceggh" style="line-height:1.6;font-size:1.05rem;color:#5a6c7d;">
      <!-- JS åŠ¨æ€æ’å…¥ -->
    </div>
</div>

        </div>
    </div>

<script src="calendar/data.js"></script>
<script src="birthday/data.js"></script>
<script src="wealth/data.js"></script>
<script src="wealthggh/data.js"></script>

<script>
/* =========================
   ç™¾å¹´æ—¶å…‰è½´ä¸»é€»è¾‘
   ========================= */
const startTime = new Date('1991-02-01T15:05:00');
const endTime   = new Date('2091-02-01T15:05:00');

/* -------- ä¸»åˆ·æ–° -------- */
function updateMainDisplay() {
  const now = new Date();

  /* 1. å¤§è¡¨ç›˜ */
  const timeString = now.toLocaleString('zh-CN', {
    year:'numeric', month:'2-digit', day:'2-digit',
    hour:'2-digit', minute:'2-digit', second:'2-digit',
    hour12:false
  }).replace(/\//g,'-');
  document.getElementById('currentTime').textContent = timeString;

  /* 2. è¿›åº¦æ¡ */
  const total = endTime - startTime;
  const elapsed = now - startTime;
  const percent = Math.min(Math.max(elapsed / total, 0), 1);
  document.getElementById('progressFill').style.width = (percent * 100) + '%';

  /* 3. å·²èµ°æ—¶é•¿ */
  let y = now.getFullYear()  - startTime.getFullYear();
  let m = now.getMonth()     - startTime.getMonth();
  let d = now.getDate()      - startTime.getDate();
  let h = now.getHours()     - startTime.getHours();
  let min=now.getMinutes()   - startTime.getMinutes();
  let s =now.getSeconds()    - startTime.getSeconds();

  if(s <0){s+=60;min--;}
  if(min<0){min+=60;h--;}
  if(h<0){h+=24;d--;}
  if(d<0){
    const prev = new Date(now.getFullYear(), now.getMonth(), 0);
    d += prev.getDate();
    m--;
  }
  if(m<0){m+=12;y--;}

  document.getElementById('elapsedTime').textContent =
    `å·²è¿‡å»ï¼š${y}å¹´ ${m}æœˆ ${d}æ—¥ ${h}æ—¶ ${min}åˆ† ${s}ç§’`;

  /* 5. éšæœºæ„Ÿæ‚Ÿï¼ˆæ¯åˆ†é’Ÿæ¢ä¸€æ¬¡ï¼‰ */
  if(now.getSeconds()===0){
    document.getElementById('timeQuote').textContent =
      quotes[Math.floor(Math.random()*quotes.length)];
  }
}

/* =========================
   äº‹ä»¶å€’è®¡æ—¶
   ========================= */

function renderEvents() {
  const today = new Date();
  today.setHours(0,0,0,0);
  const box = document.getElementById('eventList');
  box.innerHTML = '';

  eventday_data
    .map(([ds,txt])=>{
      const t = new Date(ds+'T00:00:00');
      const daysLeft = Math.ceil((t - today)/86400000);
      return {date:ds,text:txt,days:daysLeft};
    })
    .filter(e=>e.days>=0)
    .sort((a,b)=>a.days-b.days)
    .slice(0,6)
    .forEach(e=>{
      const div = document.createElement('div');
      div.className = 'stat-item';
      div.innerHTML = `
        <div class="stat-value">${e.days}</div>
        <div class="stat-label">${e.text}</div>`;
      box.appendChild(div);
    });
}


/* ---------- ç”Ÿæ—¥æé†’ï¼ˆé€‚é…ç°æœ‰ birthday_dataï¼‰ ---------- */
function zero(n){return n<10?'0'+n:n;}

function getBirthdayList(){
  const today=new Date();
  const y=today.getFullYear();
  const m=zero(today.getMonth()+1);
  const d=zero(today.getDate());
  const mmdd=m+'-'+d;

  const yesterday=new Date(today);
  yesterday.setDate(yesterday.getDate()-1);
  const yy=zero(yesterday.getMonth()+1);
  const dd=zero(yesterday.getDate());
  const yMd=yy+'-'+dd;

  const tomorrow=new Date(today);
  tomorrow.setDate(tomorrow.getDate()+1);
  const ty=zero(tomorrow.getMonth()+1);
  const td=zero(tomorrow.getDate());
  const tMd=ty+'-'+td;

  /* ä» birthday_data é‡Œæ‹¿åå• */
  const pick=md=>{
    const [M,D]=md.split('-').map(Number);
    return birthday_data[M] && birthday_data[M][D] ? birthday_data[M][D] : [];
  };

  const yList   = pick(yMd);
  const todayList= pick(mmdd);
  const tList   = pick(tMd);

  /* æ¸²æŸ“ */
  const box=document.getElementById('birthdayBox');
box.innerHTML=`
  <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
    <span style="white-space:pre">æ˜¨æ—¥ï¼š</span><span>${yList.length?yList.join('ã€'):'â€”â€”'}</span>
  </div>
  <div style="display:flex;font-family:monospace;font-size:1.1rem;line-height:1.6;color:#e67e22;font-weight:bold;margin:4px 0;">
    <span style="white-space:pre">ä»Šæ—¥ï¼š</span><span>${todayList.length?todayList.join('ã€'):'â€”â€”'}</span>
  </div>
  <div style="display:flex;font-family:monospace;font-size:0.95rem;line-height:1.6;">
    <span style="white-space:pre">æ˜æ—¥ï¼š</span><span>${tList.length?tList.join('ã€'):'â€”â€”'}</span>
  </div>
`;
}

function getWealth(){
    /* â€”â€” æ±‚å’Œ â€”â€” */
    function sumArr(arr) { return arr.reduce((s,[,,v])=>s+(v||0),0); }
    const assetTotal = sumArr(assets_data);
    const liabTotal  = sumArr(liability_data);
    const netWorth   = assetTotal - liabTotal;
    
    /* â€”â€” ç´§å‡‘è¡Œæ¸²æŸ“ â€”â€” */
    document.getElementById('compactBalance').innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»èµ„äº§</span>
        <span style="font-weight:bold;color:#3498db;">${assetTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»è´Ÿå€º</span>
        <span style="font-weight:bold;color:#e67e22;">${liabTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>å‡€èµ„äº§</span>
        <span style="font-weight:bold;color:#2ecc71;">${netWorth.toFixed(2)}</span>
      </div>
    `;
}

function getWealthggh(){
    /* â€”â€” æ±‚å’Œ â€”â€” */
    function sumArr(arr) { return arr.reduce((s,[,,v])=>s+(v||0),0); }
    const assetTotal = sumArr(assets_ggh_data);
    const liabTotal  = sumArr(liability_ggh_data);
    const netWorth   = assetTotal - liabTotal;
    
    /* â€”â€” ç´§å‡‘è¡Œæ¸²æŸ“ â€”â€” */
    document.getElementById('compactBalanceggh').innerHTML = `
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»èµ„äº§</span>
        <span style="font-weight:bold;color:#3498db;">${assetTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>æ€»è´Ÿå€º</span>
        <span style="font-weight:bold;color:#e67e22;">${liabTotal.toFixed(2)}</span>
      </div>
      <div style="display:flex;justify-content:space-between;align-items:center;margin:4px 0;">
        <span>å‡€èµ„äº§</span>
        <span style="font-weight:bold;color:#2ecc71;">${netWorth.toFixed(2)}</span>
      </div>
    `;
}

/* ===== ç‚¹å‡»è·³è½¬ ===== */
document.getElementById('eventdayModule').addEventListener('click', () => {
    // æŠŠä¸‹é¢åœ°å€æ¢æˆä½ æƒ³æ‰“å¼€çš„å®é™…ç½‘å€
    window.open('calendar/index.html', '_blank');
});
document.getElementById('birthdayModule').addEventListener('click', () => {
    // æŠŠä¸‹é¢åœ°å€æ¢æˆä½ æƒ³æ‰“å¼€çš„å®é™…ç½‘å€
    window.open('birthday/index.html', '_blank');
});
document.getElementById('wealthModule').addEventListener('click', () => {
    // æŠŠä¸‹é¢åœ°å€æ¢æˆä½ æƒ³æ‰“å¼€çš„å®é™…ç½‘å€
    window.open('wealth/index.html', '_blank');
});
document.getElementById('wealthgghModule').addEventListener('click', () => {
    // æŠŠä¸‹é¢åœ°å€æ¢æˆä½ æƒ³æ‰“å¼€çš„å®é™…ç½‘å€
    window.open('wealthggh/index.html', '_blank');
});

/* =========================
   å¯åŠ¨å®šæ—¶å™¨
   ========================= */
updateMainDisplay();   // å…ˆåˆ·ä¸€æ¬¡
renderEvents();
getBirthdayList();
getWealth();
getWealthggh();

setInterval(updateMainDisplay, 1000);   // ä¸»æ—¶é—´ 1 ç§’
</script>

</body>
</html>