<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="../static/bootstrap5/css/bootstrap.min.css">
		<script src="../static/jquery-3.2.1.min.js"></script>
		<!--<script src="../static/bootstrap5/popper.js"></script>-->
		<script src="../static/bootstrap5/js/bootstrap.min.js"></script>
		<script src="../static/vue.min.js"></script>
		<script src="../static/echarts.min.js"></script>
		<script src="../static/regression.min.js"></script>
	</head>
	
	<body>

		<div class="container" id="appvue" style="background-color:#F5F5F5;">

			<nav class="navbar navbar-expand-lg navbar-dark bg-dark rounded">
				<a class="navbar-brand" href="#"> THIPPO</a>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item"><a class="nav-link" href="../weight/index.html">体重记录 </a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">财务</a>
							<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a class="dropdown-item" href="../wealth/anabalancesheet.html">投资分析</a></li>
								<li><a class="dropdown-item" href="../wealth/balancesheet.html">资产负债表</a></li>
							</ul>
						</li>
						<!--<li class="nav-item"><a class="nav-link" href="transaction/index.html">投资记录 </a></li>-->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">投资</a>
							<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a class="dropdown-item" href="tradetiming.html">择时分析</a></li>
								<li><a class="dropdown-item" href="newstrategy.html">新股策略</a></li>
								<li><a class="dropdown-item" href="convertiblebond.html">可转债YTM</a></li>
								<li><a class="dropdown-item" href="newshare.html">七天实践</a></li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">工具箱</a>
							<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a class="dropdown-item" href="../tools/kellycriterion.html">凯利公式</a></li>
								<li><a class="dropdown-item" href="../tools/bitcoinaddress.html">比特币地址</a></li>
								<li><a class="dropdown-item" href="../tools/dailyk.html">日K线</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</nav>
		    
			<div class="progress" style="margin-top:10px;">
				<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;" id="lifebar"></div>
			</div>
					
			</br>
			<div class="row">
			<div id="main" style="width:100%;height:500px;"></div>
			</div>
			<div class="row">
			<div id="beta_div" style="width:100%;height:500px;"></div>
			</div>
			<div class="row">
			<div id="balance_div" style="width:100%;height:500px;"></div>
			</div>
			
			</br>
			</br>

		</div>
		
		
		<script>
			var raw_data = [
				['2021-7-21', 5144.04, 645340.11, -24.68],
				['2021-7-22', 5151.75, 647601.06, 0],
				['2021-7-23', 5089.23, 647320.89, 0],
				['2021-7-26', 4925.3, 635028.16, 0],
				['2021-7-27', 4751.31, 615950.58, 1499.99],
				['2021-7-28', 4760.48, 632032.93, 8832],
				['2021-7-29', 4850.27, 654065.37, 0],
				['2021-7-30', 4811.17, 658848.36, 0],
				['2021-8-2', 4933.74, 676373.1, 0],
				['2021-8-3', 4934.46, 669264.61, 0],
				['2021-8-4', 4978.85, 693559.97, 0],
				['2021-8-5', 4948.67, 686322.01, -25.61],
				['2021-8-6', 4921.56, 682995.21, 1129.08],
				['2021-8-9', 4985.56, 674707.95, 0],
				['2021-8-10', 5043.15, 673622.35, 0],
				['2021-8-11', 5015.34, 675881.88, 0],
				['2021-8-12', 4973.35, 675805.27, 0],
				['2021-8-13', 4945.98, 672665.29, 0],
				['2021-8-16', 4941.07, 664292.95, 0],
				['2021-8-17', 4837.4, 657933.9, 0],
				['2021-8-18', 4894.24, 664379.94, 0],
				['2021-8-19', 4862.14, 673493.52, 0],
				['2021-8-20', 4769.27, 663244.39, 0],
				['2021-8-23', 4835.88, 675860.86, 0],
				['2021-8-24', 4888.39, 681028.77, 0],
				['2021-8-25', 4898.16, 683251.14, 0],
				['2021-8-26', 4801.61, 685530.18, 11629.47],
				['2021-8-27', 4827.04, 686535.72, 0],
				['2021-8-30', 4813.27, 685441.04, 0],
				['2021-8-31', 4805.61, 678744.96, 0],
				['2021-9-1', 4869.46, 671047.91, 0],
				['2021-9-2', 4869.41, 674533.81, 0],
				['2021-9-3', 4843.06, 669135.3, 1034.78],
				['2021-9-6', 4933.73, 690261.85, 0],
				['2021-9-7', 4992.83, 693159.93, 0],
				['2021-9-8', 4972.13, 687623.18, 0],
				['2021-9-9', 4970.01, 682174.38, -4468.19],
				['2021-9-10', 5013.52, 677826.46, 0],
				['2021-9-13', 4991.66, 675384.59, -200],
				['2021-9-14', 4917.16, 680953.71, 0],
				['2021-9-15', 4867.32, 673601.08, 0],
				['2021-9-16', 4807.70, 655851.89, 0],
				['2021-9-17', 4855.94, 657654.53, 0],
				['2021-9-22', 4821.77, 652825.96, 0],
				['2021-9-23', 4853.20, 658307.05, 0],
				['2021-9-24', 4849.43, 659621.63, 0],
				['2021-9-27', 4877.37, 660285.57, 0],
				['2021-9-28', 4883.83, 650303.13, 0],
				['2021-9-29', 4833.93, 640045.47, 0],
				['2021-9-30', 4866.38, 663650.33, 7062.61],
				['2021-10-8', 4929.94, 668505.3, 0],
				['2021-10-11', 4936.19, 687901.65, 20000],
				['2021-10-12', 4883.84, 679832.75, 0],
				['2021-10-13', 4940.16, 691082.41, 0],
				['2021-10-14', 4913.61, 700175.24, 5000],
				['2021-10-15', 4931.82, 713262.47, 0],
				['2021-10-18', 4874.78, 713156.61, 0],
				['2021-10-19', 4922.72, 713821.81, 0],
				['2021-10-20', 4910.18, 718291.97, 0],
				['2021-10-21', 4928.02, 715567.23, 0],
				['2021-10-22', 4959.73, 720582.7, 0],
				['2021-10-25', 4979.52, 732372.37, 0],
				['2021-10-26', 4963.1, 733270.08, 0],
				['2021-10-27', 4898.16, 734687.91, 0],
				['2021-10-28', 4864.14, 727285.33, 0],
				['2021-10-29', 4908.77, 736633.1, 0],
				['2021-11-1', 4890.69, 735113.27, 0],
				['2021-11-2', 4839.85, 742217.04, 0],
				['2021-11-3', 4821.11, 737499.79, 0],
				['2021-11-4', 4868.74, 748953.16, 0],
				['2021-11-5', 4842.35, 742267.72, 0],
				['2021-11-8', 4848.18, 752243.68, 7187.62],
				['2021-11-9', 4846.74, 755405.79, 0],
				['2021-11-10', 4821.19, 749940.16, 0],
				['2021-11-11', 4898.65, 755034.7, 0],
				['2021-11-12', 4888.37, 752605.5, 0],
				['2021-11-15', 4882.38, 749348.57, 0],
				['2021-11-16', 4883.32, 744712.8, 0],
				['2021-11-17', 4885.75, 749565.03, 0],
				['2021-11-18', 4837.62, 747272.41, 0],
				['2021-11-19', 4890.06, 751151.13, 0],
				['2021-11-22', 4912.4, 762772.97, 0],
				['2021-11-23', 4913.35, 762396.03, 0],
				['2021-11-24', 4916.66, 759066.28, 0],
				['2021-11-25', 4896.44, 757874.1, 0],
				['2021-11-26', 4860.13, 756114.54, 0],
				['2021-11-29', 4851.42, 763490.4, 0],
				['2021-11-30', 4832.03, 764683.69, 0],
				['2021-12-1', 4843.85, 762596.85, 0],
				['2021-12-2', 4856.16, 766147.28, 0],
				['2021-12-3', 4901.02, 765234.6, 0],
				['2021-12-6', 4892.62, 756715.22, 0],
				['2021-12-7', 4922.1, 748177.57, 0],
				['2021-12-8', 4995.93, 753855.48, 0],
				['2021-12-9', 5078.69, 757212.7, 0],
				['2021-12-10', 5055.12, 759509.41, 0],
				['2021-12-13', 5083.8, 759240.43, 0],
				['2021-12-14', 5049.7, 756609.81, 0],
				['2021-12-15', 5005.9, 755258.51, 0],
				['2021-12-16', 5034.73, 755642.11, 0],
				['2021-12-17', 4954.76, 752156.02, 0],
				['2021-12-20', 4880.42, 742649.35, 0],
				['2021-12-21', 4913.49, 744402.31, 0],
				['2021-12-22', 4914.45, 747166.21, 0],
				['2021-12-23', 4948.74, 749695.32, 0],
				['2021-12-24', 4921.34, 741045.54, 0],
				['2021-12-27', 4919.32, 741777.9, 0],
				['2021-12-28', 4955.96, 743638.02, 0],
				['2021-12-29', 4883.48, 739528.99, 0],
				['2021-12-30', 4921.51, 740284.41, 0],
				['2021-12-31', 4940.37, 740782.48, 0],
				['2022-1-4', 4917.77, 743431.46, 0],
				['2022-1-5', 4868.12, 731443.52, 0],
				['2022-1-6', 4818.23, 736288.44, 0],
				['2022-1-7', 4822.37, 737263.02, 0],
				['2022-1-10', 4844.05, 739962.89, 0],
				['2022-1-11', 4797.77, 741213.74, 0],
				['2022-1-12', 4845.58, 749410.24, 0],
				['2022-1-13', 4765.92, 743513.38, 0],
				['2022-1-14', 4726.73, 746468.06, 0],
				['2022-1-17', 4767.28, 751642.73, 0],
				['2022-1-18', 4813.35, 745780.79, 0],
				['2022-1-19', 4780.38, 742239.66, 0],
				['2022-1-20', 4823.51, 741769.72, 0],
				['2022-1-21', 4779.31, 737933.37, 0],
				['2022-1-24', 4786.74, 737003.76, 0],
				['2022-1-25', 4678.45, 731974.97, 0],
				['2022-1-26', 4712.31, 734679.55, 0],
				['2022-1-27', 4619.88, 747927.29, 20009.99],
				['2022-1-28', 4563.77, 750535.34, 0],
				['2022-2-7', 4634.09, 766138.31, 12806.3],
				['2022-2-8', 4608.77, 767277.13, 0],
				['2022-2-9', 4652.06, 769633.2, 0],
				['2022-2-10', 4639.86, 769710.54, 0],
				['2022-2-11', 4601.4, 767194.22, 0],
				['2022-2-14', 4551.69, 763919.15, 0],
				['2022-2-15', 4600.1, 761427.47, 0],
				['2022-2-16', 4617.99, 764801.32, 0],
				['2022-2-17', 4629.16, 765413.36, 0],
				['2022-2-18', 4651.24, 766525.27, 0],
				['2022-2-21', 4634.31, 770592.71, 0],
				['2022-2-22', 4574.15, 766781.81, 0],
				['2022-2-23', 4623.05, 773859.48, 1000],
				['2022-2-24', 4529.32, 769272.09, 0],
				['2022-2-25', 4573.42, 781263.13, 10000],
				['2022-2-28', 4581.65, 781580.47, 0],
				['2022-3-1', 4619.69, 780718.4, 0],
				['2022-3-2', 4578.6, 785036.21, 0],
				['2022-3-3', 4551.63, 781354.7, 0],
				['2022-3-4', 4496.43, 778307.19, 0],
				['2022-3-7', 4352.78, 774212.69, 0],
				['2022-3-8', 4265.39, 770884.93, 0],
				['2022-3-9', 4226.35, 769864.57, 0],
				['2022-3-10', 4292.84, 771880.72, 0],
				['2022-3-11', 4306.52, 771559.39, 0],
				['2022-3-14', 4174.76, 772238.66, 0],
				['2022-3-15', 3983.81, 768063.3, 0],
				['2022-3-16', 4156.08, 770284.44, 0],
				['2022-3-17', 4237.7, 771332.53, 0],
				['2022-3-18', 4265.9, 772480.35, 0],
				['2022-3-21', 4258.75, 773676.14, 0],
				['2022-3-22', 4255.3, 773621.82, 0],
				['2022-3-23', 4276.52, 775060.33, 0],
				['2022-3-24', 4251.31, 775146.81, 0],
				['2022-3-25', 4174.57, 773620.01, 0],
				['2022-3-28', 4148.47, 771936.02, 0],
				['2022-3-29', 4134.14, 770234.73, 0],
				['2022-3-30', 4254.1, 771318.3, 0],
				['2022-3-31', 4222.6, 770780.18, 0],
				['2022-4-1', 4276.16, 772237.64, 0],
				['2022-4-6', 4263.84, 773192.14, 0],
				['2022-4-7', 4209.1, 771738.55, 0],
				['2022-4-8', 4230.77, 771832.42, 0],
				['2022-4-11', 4100.07, 770791.08, 0],
				['2022-4-12', 4179.97, 770840.29, 0],
				['2022-4-13', 4139.74, 770326.01, 0],
				['2022-4-14', 4191.57, 770248.79, 0],
				['2022-4-15', 4188.75, 769422.16, 0],
				['2022-4-18', 4166.38, 769374.63, 0],
				['2022-4-19', 4134.9, 770029.97, 0],
				['2022-4-20', 4070.79, 771851.52, 0],
				['2022-4-21', 3995.83, 768904.77, 0],
				['2022-4-22', 4013.25, 768836.47, 0],
				['2022-4-25', 3814.91, 765076.12, 0],
				['2022-4-26', 3784.12, 773700.5, 10401.93],
				['2022-4-27', 3895.54, 773123.4, 0],
				['2022-4-28', 3921.11, 772637.38, 0],
				['2022-4-29', 4016.24, 775961.29, 0],
				['2022-5-5', 4010.21, 776936.5, 0],
				['2022-5-6', 3908.82, 775654.36, 0],
				['2022-5-9', 3877.44, 776932.57, 0],
				['2022-5-10', 3919.87, 776903.1, 0],
				['2022-5-11', 3976.43, 775899.78, 0],
				['2022-5-12', 3958.74, 778536.0, 0],
				['2022-5-13', 3988.6, 778794.21, 0],
				['2022-5-16', 3956.54, 778695.47, 0],
				['2022-5-17', 4005.89, 778418.58, 0],
				['2022-5-18', 3991.91, 779106.87, 0],
				['2022-5-19', 3999.6, 779003.91, 0],
				['2022-5-20', 4077.6, 819594.19, 40000],
				['2022-5-23', 4053.98, 820903.59, 0],
				['2022-5-24', 3959.15, 819244.84, 0],
				['2022-5-25', 3983.18, 821770.32, 0],
				['2022-5-26', 3993.04, 822361.23, 0],
				['2022-5-27', 4001.3, 821198.55, 0],
				['2022-5-30', 4029.02, 821188.87, 0],
				['2022-5-31', 4091.52, 821152.74, 0],
				['2022-6-1', 4083.18, 821416.27, 0],
				['2022-6-2', 4089.57, 821284.05, 0],
				['2022-6-6', 4166.09, 821804.64, 0],
				['2022-6-7', 4179.13, 822199.12, 0],
				['2022-6-8', 4219.81, 822570.44, 0],
				['2022-6-9', 4175.67, 821142.55, 0],
				['2022-6-10', 4238.99, 822072.68, 0],
				['2022-6-13', 4189.35, 782974.95, -40000],
				['2022-6-14', 4222.31, 783015.93, 0],
				['2022-6-15', 4278.22, 783031.18, 0],
				['2022-6-16', 4250.06, 783577.69, 0],
				['2022-6-17', 4309.04, 783699.12, 0],
				['2022-6-20', 4330.43, 782962.04, 0],
				['2022-6-21', 4325.57, 782903.24, 0],
				['2022-6-22', 4270.62, 782562.77, 0],
				['2022-6-23', 4343.88, 783133.64, 0],
				['2022-6-24', 4394.77, 783383.87, 0],
				['2022-6-27', 4444.26, 784306.29, 0],
				['2022-6-28', 4490.52, 784931.02, 0],
				['2022-6-29', 4421.36, 783495.24, 0],
				['2022-6-30', 4485.01, 783799.22, 0],
				['2022-7-1', 4466.72, 784198.41, 0],
				['2022-7-4', 4496.03, 784594.48, 0],
				['2022-7-5', 4489.54, 785129.81, 0],
				['2022-7-6', 4423.97, 785296.59, 0],
				['2022-7-7', 4443.47, 786483.46, 0],
				['2022-7-8', 4428.78, 787834.58, 0],
				['2022-7-11', 4354.62, 785346.0, 0],
				['2022-7-12', 4313.62, 785614.49, 0],
				['2022-7-13', 4321.46, 785508.7, 0],
				['2022-7-14', 4322.07, 786227.47, 0],
				['2022-7-15', 4248.53, 786314.12, 0],
				['2022-7-18', 4292.59, 787841.63, 0],
				['2022-7-19', 4269.34, 786350.75, 0],
				['2022-7-20', 4283.8, 786174.6, 0],
				['2022-7-21', 4236.06, 787958.47, 0],
				['2022-7-22', 4238.23, 790201.39, 0],
				['2022-7-25', 4212.64, 790324.71, 0],
				['2022-7-26', 4245.98, 789481.07, 0],
				['2022-7-27', 4225.04, 792229.63, 0],
				['2022-7-28', 4225.67, 790073.47, 0],
				['2022-7-29', 4170.1, 792154.25, 0],
				['2022-8-1', 4188.68, 794498.06, 0],
				['2022-8-2', 4107.02, 791224.95, 0],
				['2022-8-3', 4066.98, 792566.96, 0],
				['2022-8-4', 4101.54, 793433.53, 0],
				['2022-8-5', 4156.91, 794883.53, 0],
				['2022-8-8', 4148.07, 795988.72, 0],
				['2022-8-9', 4156.29, 797816.29, 0],
				['2022-8-10', 4109.74, 799167.29, 0],
				['2022-8-11', 4193.54, 801896.26, 0],
				['2022-8-12', 4191.15, 799658.03, 0],
				['2022-8-15', 4185.68, 801463.69, 0],
				['2022-8-16', 4177.84, 801624.45, 0],
				['2022-8-17', 4216.96, 802675.23, 0],
				['2022-8-18', 4180.1, 802728.34, 0],
				['2022-8-19', 4151.07, 800145.19, 0],
				['2022-8-22', 4181.4, 807983.72, 0],
				['2022-8-23', 4161.08, 809250.08, 0],
				['2022-8-24', 4082.42, 804587.61, 0],
				['2022-8-25', 4116.24, 811281.71, 10000],
				['2022-8-26', 4107.55, 810632.84, 0],
				['2022-8-29', 4089.52, 810102.65, 0],
				['2022-8-30', 4075.79, 809935.65, 0],
				['2022-8-31', 4078.84, 808440.46, 0],
				['2022-9-1', 4043.74, 808789.53, 0],
				['2022-9-2', 4023.61, 809704.51, 0],
				['2022-9-5', 4015.43, 811380.77, 0],
				['2022-9-6', 4052.28, 812778.2, 0],
				['2022-9-7', 4054.98, 813523.72, 0],
				['2022-9-8', 4037.68, 810419.9, 0],
				['2022-9-9', 4093.79, 801868.81, 0],
				['2022-9-13', 4111.11, 802846.31, 0],
				['2022-9-14', 4065.36, 803361.52, 0],
				['2022-9-15', 4027.12, 802938.51, 0],
				['2022-9-16', 3932.68, 800838.35, 0],
				['2022-9-19', 3928.00, 792868.41, 0],
				['2022-9-20', 3932.84, 796269.48, 0],
				['2022-9-21', 3903.73, 796156.82, 0],
				['2022-9-22', 3869.34, 796271.43, 0],
				['2022-9-23', 3856.02, 794452.7, 0],
				['2022-9-26', 3836.68, 793585.31, 0],
				['2022-9-27', 3892.3, 794306.86, 0],
				['2022-9-28', 3828.71, 793142.92, 0],
				['2022-9-29', 3827.14, 792963.91, 0],
				['2022-9-30', 3804.89, 793520.48, 0],
				['2022-10-10', 3720.94, 793042.74, 0],
				['2022-10-11', 3727.69, 792543.57, 0],
				['2022-10-12', 3784.31, 793749.1, 0],
				['2022-10-13', 3752.67, 796373.1, 0],
				['2022-10-14', 3842.47, 798036.69, 0],
				['2022-10-17', 3846.41, 799083.67, 0],
				['2022-10-18', 3838.27, 798926.72, 0],
				['2022-10-19', 3776.53, 798444.16, 0],
				['2022-10-20', 3754.93, 798035.77, 0],
				['2022-10-21', 3742.89, 798341.8, 0],
				['2022-10-24', 3633.37, 796936.61, 0],
				['2022-10-25', 3627.45, 796056.78, 0],
				['2022-10-26', 3656.9, 796883.54, 0],
				['2022-10-27', 3631.14, 796580.89, 0],
				['2022-10-28', 3541.33, 795535.26, 0],
				['2022-10-31', 3508.7, 796215,17, 0],
				['2022-11-1', 3634.17, 797452.86, 0],
				['2022-11-2', 3677.81, 797268.46, 0],
				['2022-11-3', 3647.9, 797659.88, 0],
				]
		</script>

		<script>
			function cum_cal(data){
				var sum = 1
				for (i = 0; i < data.length; i++) {
					sum *= (1 + parseFloat(data[i])/100)
				}
				return ((sum - 1)*100).toFixed(4)
			}

			function splitdata(rawdata){
				var date = []
				var hs300 = []
				var my = []
				var hs300_cum = []
				var my_cum = []
				for (i = 1; i < rawdata.length; i++) { 
					date.push(rawdata[i][0])
					hs300.push((((rawdata[i][1]-rawdata[i-1][1])/rawdata[i-1][1])*100))
					my.push((((rawdata[i][2]-rawdata[i][3])-rawdata[i-1][2])/rawdata[i-1][2])*100)
				}
				for (j = 0; j < date.length; j++) { 
					hs300_cum.push(cum_cal(hs300.slice(0,j+1)))
					my_cum.push(cum_cal(my.slice(0,j+1)))
				}
				return {date:date,hs300:hs300_cum,my:my_cum}
			}
				  
			var new_data = splitdata(raw_data)
			
			var cha_list = []  
			for (i=0;i<new_data.hs300.length;i++)
			{
			    cha_list.push(new_data.my[i]-new_data.hs300[i])
			}
			
			option = {
				tooltip: {
					trigger: 'axis'
				},
				legend: {
					data: ['沪深300', '总盈利']
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis: {
					type: 'category',
					boundaryGap: false,
					data: new_data.date
				},
				yAxis: {
					type: 'value'
				},
				series: [
					{
						name: '沪深300',
						type: 'line',
						smooth: true,
						symbol: 'none',
						color: 'red',
						data: new_data.hs300
					},
					{
						name: '总盈利',
						type: 'line',
						smooth: true,
						symbol: 'none',
						color: '#33CCFF',
						data: new_data.my
					},
					{
						name: '收益差',
						type: 'bar',
						color: 'rgba(0, 0, 0, 0.1)',
						label: {
						    show: false
						},
						data: cha_list
					},
				],
				dataZoom: [
					{
						type: 'inside',
						start: 0,
						end: 100
					},
					{
						show: true,
						type: 'slider',
						top: '90%',
						start: 0,
						end: 100
					}
				],
			};

			var myChart = echarts.init(document.getElementById('main'));
			myChart.setOption(option,true);
		</script>

		<script>

			function get_beta_data(rawdata){
				var hs300 = []
				var my = []
				var x_y = []
				for (i = 1; i < rawdata.length; i++) { 
					hs300.push((((rawdata[i][1]-rawdata[i-1][1])/rawdata[i-1][1])))
					my.push((((rawdata[i][2]-rawdata[i][3])-rawdata[i-1][2])/rawdata[i-1][2]))
				}
				for (j = 0; j < my.length; j++) {
					x_y.push([hs300[j],my[j]])
				}
				return {x_y:x_y,min:Math.min(...hs300),max:Math.max(...hs300)}
			}

			var beta_data = get_beta_data(raw_data)

			var regress_result = regression.linear(beta_data.x_y)

			option_beta = {
				xAxis: {},
				yAxis: {},
				series: [
					{
						symbolSize: 5,
						data: beta_data.x_y,
						type: 'scatter',
						markLine: {
							animation: true,
							label: {
								formatter: regress_result.string+'\n\nβ = '+regress_result.equation[0]+'\n\nr2 = '+regress_result.r2,
								align: 'top'
							},
							lineStyle: {
								type: 'solid'
							},
							data: [
								[
									{
										coord: [beta_data.min, regress_result.equation[0]*(beta_data.min)+regress_result.equation[1]],
										symbol: 'none'
									},
									{
										coord: [beta_data.max, regress_result.equation[0]*(beta_data.max)+regress_result.equation[1]],
										symbol: 'none'
									}
								]
							]
						}
					}
				]
			}

			var myChart_beta = echarts.init(document.getElementById('beta_div'));
			myChart_beta.setOption(option_beta,true);
		</script>


                <script>
                        function get_balance_data(rawdata){
                                var date = []
                                var data = []
                                for (i = 1; i < rawdata.length; i++) { 
                                        date.push(rawdata[i][0])
                                        data.push(rawdata[i][2])
                                }
                                return [date, data]
                        }
                                  
                        var new_data = get_balance_data(raw_data)
                        
                        option_balance = {
                                tooltip: {
                                        trigger: 'axis'
                                },
                                grid: {
                                        left: '3%',
                                        right: '4%',
                                        bottom: '3%',
                                        containLabel: true
                                },
                                xAxis: {
                                        type: 'category',
                                        boundaryGap: false,
                                        data: new_data[0]
                                },
                                yAxis: {
                                        type: 'value'
                                },
                                series: [
                                        {
                                                name: '总额',
                                                type: 'bar',
                                                color: 'rgba(30,144,255,0.5)',
                                                label: {
                                                    show: false
                                                },
                                                data: new_data[1]
                                        },
                                ],
                                dataZoom: [
                                        {
                                                type: 'inside',
                                                start: 0,
                                                end: 100
                                        },
                                        {
                                                show: true,
                                                type: 'slider',
                                                top: '90%',
                                                start: 0,
                                                end: 100
                                        }
                                ],
                        };
                        var myChart_balance = echarts.init(document.getElementById('balance_div'));
                        myChart_balance.setOption(option_balance,true);
                </script>

		<script>
			var year=new Date().getFullYear();
			var month=new Date().getMonth()+1;
			var date=new Date().getDate();
			s1  =  "1991-2-1";
			s2  =  year+'-'+month+'-'+date;
			day = DateDiff(s1, s2)/36525;
			if (day<0.2){
				$("#lifebar").attr({class:"progress-bar bg-success",style:"width:"+100*day+"%;"});
			} else if (0.2<=day && day<0.4){
				$("#lifebar").attr({class:"progress-bar bg-info",style:"width:"+100*day+"%;"});
			} else if (0.4<=day && day<0.60){
				$("#lifebar").attr({class:"progress-bar",style:"width:"+100*day+"%;"});
			} else {
				$("#lifebar").attr({class:"progress-bar bg-warning",style:"width:"+100*day+"%;"});
			};
			function DateDiff(sDate1, sDate2){  
				var aDate, oDate1, oDate2, iDays;
				aDate = sDate1.split("-");
				oDate1 = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0]);
				aDate = sDate2.split("-");
				oDate2 = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0]);
				iDays = parseInt(Math.abs(oDate1 - oDate2) / 1000 / 60 / 60 /24);
				return iDays;
			};
		</script>

	</body>
	
</html>
