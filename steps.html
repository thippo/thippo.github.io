<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="static/bootstrap5/css/bootstrap.min.css">
		<script src="static/jquery-3.2.1.min.js"></script>
		<!--<script src="../static/bootstrap5/popper.js"></script>-->
		<script src="static/bootstrap5/js/bootstrap.min.js"></script>
		<script src="static/vue.min.js"></script>
		<script src="static/echarts.min.js"></script>
		<script src="static/regression.min.js"></script>
	</head>
	
	<body>

		<div class="container" id="appvue" style="background-color:#F5F5F5;">

			<nav class="navbar navbar-expand-lg navbar-dark bg-dark rounded">
				<a class="navbar-brand" href="#"> THIPPO</a>
				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item"><a class="nav-link" href="../weight/index.html">体重记录 </a></li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">财务</a>
							<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a class="dropdown-item" href="../wealth/anabalancesheet.html">投资分析</a></li>
								<li><a class="dropdown-item" href="../wealth/balancesheet.html">资产负债表</a></li>
								<li><a class="dropdown-item" href="../wealth/exchange.html">外汇</a></li>
							</ul>
						</li>
						<!--<li class="nav-item"><a class="nav-link" href="transaction/index.html">投资记录 </a></li>-->
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">投资</a>
							<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a class="dropdown-item" href="tradetiming.html">择时分析</a></li>
								<li><a class="dropdown-item" href="newstrategy.html">新股策略</a></li>
								<li><a class="dropdown-item" href="convertiblebond.html">可转债YTM</a></li>
								<li><a class="dropdown-item" href="newshare.html">七天实践</a></li>
							</ul>
						</li>
						<li class="nav-item dropdown">
							<a class="nav-link dropdown-toggle" href="#" id="navbarScrollingDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">工具箱</a>
							<ul class="dropdown-menu" aria-labelledby="navbarScrollingDropdown">
								<li><a class="dropdown-item" href="../tools/kellycriterion.html">凯利公式</a></li>
								<li><a class="dropdown-item" href="../tools/bitcoinaddress.html">比特币地址</a></li>
								<li><a class="dropdown-item" href="../tools/dailyk.html">日K线</a></li>
							</ul>
						</li>
					</ul>
				</div>
			</nav>
		    
			<div class="progress" style="margin-top:10px;">
				<div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;" id="lifebar"></div>
			</div>
					
			</br>
			<div class="row">
			<div id="main" style="width:100%;height:500px;"></div>
			</div>
			<div class="row">
			<div id="beta_div" style="width:100%;height:500px;"></div>
			</div>
			<div class="row">
			<div id="balance_div" style="width:100%;height:500px;"></div>
			</div>
			
			</br>
			</br>

		</div>
		
		
		<script>
			var raw_data = [
				['2023-3-11', 4368, 3067],
				['2023-3-12', 5147, 2820],
				['2023-3-13', 4724, 1622],
				['2023-3-14', 6642, 1684],
				['2023-3-15', 5679, 1942],
				['2023-3-16', 5345, 2699],
				['2023-3-17', 7060, 395],
				['2023-3-18', 7776, 8876],
				['2023-3-19', 5882, 2557],
				['2023-3-20', 7816, 1344],
			]
		</script>

		<script>
			
			function splitdata(rawdata){
				var date = []
				var trhl = []
				var grhy = []
				for (i = 1; i < rawdata.length; i++) { 
					date.push(rawdata[i][0])
					trhl.push(rawdata[i][1])
					grhy.push(rawdata[i][2])
				}
				return {date:date,trhl:trhl,grhy:grhy}
			}
				  
			var new_data = splitdata(raw_data)
			
			var cha_list = []  
			for (i=0;i<new_data.trhl.length;i++)
			{
			    cha_list.push(new_data.trhl[i]-new_data.grhy[i])
			}

			const average = (...args) => args.reduce((a, b) => a + b) / args.length;
			var trhllegend = '唐熔浤琳 日均步数:'+(eval(new_data.trhl.join("+"))/new_data.trhl.length)
			var grhylegend = '耿熔浤塬 日均步数:'+(eval(new_data.grhy.join("+"))/new_data.grhy.length)

			option = {
				tooltip: {
					trigger: 'axis'
				},
				legend: {
					data: [trhllegend, grhylegend]
				},
				grid: {
					left: '3%',
					right: '4%',
					bottom: '3%',
					containLabel: true
				},
				xAxis: {
					type: 'category',
					boundaryGap: false,
					data: new_data.date
				},
				yAxis: {
					type: 'value'
				},
				series: [
					{
						name: trhllegend,
						type: 'line',
						smooth: true,
						symbol: 'none',
						color: 'red',
						data: new_data.trhl
					},
					{
						name: grhylegend,
						type: 'line',
						smooth: true,
						symbol: 'none',
						color: '#33CCFF',
						data: new_data.grhy
					},
					{
						name: '步数差',
						type: 'bar',
						color: 'rgba(0, 0, 0, 0.1)',
						label: {
						    show: false
						},
						data: cha_list
					},
				],
				dataZoom: [
					{
						type: 'inside',
						start: 0,
						end: 100
					},
					{
						show: true,
						type: 'slider',
						top: '90%',
						start: 0,
						end: 100
					}
				],
			};

			var myChart = echarts.init(document.getElementById('main'));
			myChart.setOption(option,true);
		</script>


		<script>
			var year=new Date().getFullYear();
			var month=new Date().getMonth()+1;
			var date=new Date().getDate();
			s1  =  "1991-2-1";
			s2  =  year+'-'+month+'-'+date;
			day = DateDiff(s1, s2)/36525;
			if (day<0.2){
				$("#lifebar").attr({class:"progress-bar bg-success",style:"width:"+100*day+"%;"});
			} else if (0.2<=day && day<0.4){
				$("#lifebar").attr({class:"progress-bar bg-info",style:"width:"+100*day+"%;"});
			} else if (0.4<=day && day<0.60){
				$("#lifebar").attr({class:"progress-bar",style:"width:"+100*day+"%;"});
			} else {
				$("#lifebar").attr({class:"progress-bar bg-warning",style:"width:"+100*day+"%;"});
			};
			function DateDiff(sDate1, sDate2){  
				var aDate, oDate1, oDate2, iDays;
				aDate = sDate1.split("-");
				oDate1 = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0]);
				aDate = sDate2.split("-");
				oDate2 = new Date(aDate[1] + '-' + aDate[2] + '-' + aDate[0]);
				iDays = parseInt(Math.abs(oDate1 - oDate2) / 1000 / 60 / 60 /24);
				return iDays;
			};
		</script>

	</body>
	
</html>
