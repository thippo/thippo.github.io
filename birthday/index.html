<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ç”Ÿæ—¥æ¸…å•</title>
<script defer src="https://cloud.umami.is/script.js" data-website-id="39819c8f-f1cd-4efb-84da-85bbfa514f8d"></script>
<style>
/* ---------- åŸºç¡€ ---------- */
* { box-sizing: border-box; margin: 0; padding: 0; }
body {
  font-family: "PingFang SC", "Microsoft YaHei", sans-serif;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  min-height: 100vh;
  padding: .8vw;
  color: #333;
  font-size: 14px;          /* å…¨å±€åŸºå‡†å­—å·ç¼©å° */
}
.container {
  max-width: 1600px;        /* ç¨ç¼©çª„ï¼Œå†…å®¹æ›´é›†ä¸­ */
  margin: 0 auto;
  background: rgba(255, 255, 255, .15);
  backdrop-filter: blur(12px);
  border-radius: 16px;      /* åœ†è§’å°ä¸€ç‚¹ */
  border: 1px solid rgba(255, 255, 255, .3);
  padding: 1.5vw;
  box-shadow: 0 12px 28px rgba(0, 0, 0, .08);
}

/* ---------- å¤´éƒ¨ ---------- */
.header { text-align: center; margin-bottom: 1.5vw; }
.title { font-size: clamp(1.6rem, 4vw, 2.4rem); color: #fff; font-weight: 700; }
.current-date { font-size: clamp(.9rem, 2vw, 1.1rem); color: rgba(255, 255, 255, .9); margin-top: .6vw; }

/* ---------- ä¸‰æ å¸ƒå±€ ---------- */
.three-col {
  display: flex;
  gap: 1vw;                 /* æ é—´è·æ”¶ç´§ */
}
.col {
  flex: 1 1 33.33%;
  display: flex;
  flex-direction: column;
  gap: 1.5vw;               /* æœˆä»½å—ä¸Šä¸‹é—´è· */
}
/* å“åº”å¼æ–­ç‚¹å¾®è°ƒ */
@media (max-width: 899px) and (min-width: 600px) {
  .three-col { flex-wrap: wrap; }
  .col { flex: 1 1 48%; }
}
@media (max-width: 599px) {
  .three-col { flex-direction: column; }
  .col { flex: 1 1 100%; }
}

/* ---------- æœˆä»½å— ---------- */
.month-block {
  background: rgba(255, 255, 255, .7);
  border-radius: 12px;      /* åœ†è§’æ›´å° */
  padding: 2vw;             /* å†…è¾¹è·å‡å°‘ */
  border: 1px solid rgba(255, 255, 255, .4);
}
.month-block.today {
  background: rgba(255, 255, 255, .95);
  box-shadow: 0 0 0 2px #ff9a9e; /* æè¾¹å˜ç»† */
}
.month-title {
  font-size: clamp(1.2rem, 3vw, 1.6rem);
  font-weight: 700;
  color: #4a4a8c;
  margin-bottom: 1.2vw;
  border-left: 4px solid #ff9a9e; /* å·¦è¾¹æ¡æ›´ç»† */
  padding-left: 1.2vw;
}
.month-block.today .month-title { color: #ff9a9e; }

/* ---------- äººå‘˜å¡ç‰‡ ---------- */
.person-card {
  background: rgba(255, 255, 255, .9);
  border-radius: 8px;       /* åœ†è§’æ›´å° */
  padding: .6vw 1vw;        /* ä¸Šä¸‹å‡å°‘ */
  margin-bottom: 1vw;       /* å¡ç‰‡é—´è·æ”¶ç´§ */
  display: flex;
  align-items: center;
  gap: 1vw;
  transition: transform .25s;
}
.person-card:hover { transform: translateY(-2px); }
.avatar {
  width: 36px; height: 36px; /* å¤´åƒç¼©å° */
  border-radius: 50%;
  background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
  flex-shrink: 0;
  display: grid; place-items: center;
  font-size: 1.2rem; color: #fff;
}
.info { flex: 1; }
.name { font-size: clamp(.95rem, 2.5vw, 1.1rem); font-weight: 600; color: #333; }
.date { font-size: clamp(.8rem, 2vw, .9rem); color: #666; margin-top: 2px; }
.tag {
  font-size: clamp(.7rem, 1.8vw, .8rem);
  background: rgba(118, 75, 162, .15);
  color: #764ba2;
  padding: 3px 8px;         /* æ ‡ç­¾æ›´å° */
  border-radius: 12px;
  white-space: nowrap;
}

/* ---------- ç©ºçŠ¶æ€ ---------- */
.empty {
  text-align: center; color: rgba(0, 0, 0, .4);
  font-size: clamp(.8rem, 2vw, .9rem);
  padding: 2vw 0;
}

/* ---------- æ»šåŠ¨æç¤º ---------- */
.scroll-indicator {
  position: fixed; top: 16px; right: 16px;
  background: rgba(255, 255, 255, .2);
  backdrop-filter: blur(10px);
  color: #fff; padding: 8px 16px; border-radius: 20px;
  font-size: clamp(.8rem, 1.8vw, .9rem);
  display: none; animation: slideIn .5s ease;
  border: 1px solid rgba(255, 255, 255, .3);
}
@keyframes slideIn { from { transform: translateX(100px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1 class="title">ğŸ‚ ç”Ÿæ—¥æ¸…å•</h1>
    <div class="current-date" id="currentDate"></div>
  </div>

  <div class="scroll-indicator" id="scrollIndicator">å·²å®šä½åˆ°æœ¬æœˆ ğŸ“…</div>

  <!-- ä¸‰æ åˆ—è¡¨ -->
  <div class="three-col" id="threeCol"></div>
</div>

<script src="data.js"></script>

<script>
const monthNames = ['ä¸€æœˆ','äºŒæœˆ','ä¸‰æœˆ','å››æœˆ','äº”æœˆ','å…­æœˆ','ä¸ƒæœˆ','å…«æœˆ','ä¹æœˆ','åæœˆ','åä¸€æœˆ','åäºŒæœˆ'];

/* ===============  å·¥å…·  =============== */
const getCurrent = () => {
  const d = new Date();
  return { y: d.getFullYear(), m: d.getMonth()+1, d: d.getDate(), date: d };
};

/* ===============  ç”Ÿæˆå•ä¸ªæœˆä»½  =============== */
function buildMonth(m) {
  const cur = getCurrent();
  const block = document.createElement('div');
  block.className = 'month-block';
  if (m === cur.m) block.classList.add('today');

  let html = `<div class="month-title">${monthNames[m-1]}</div>`;

  let hasAny = false;
  const dayKeys = Object.keys(birthday_data[m] || {}).sort((a,b)=>a-b);
  dayKeys.forEach(d=>{
    birthday_data[m][d].forEach(name=>{
      hasAny = true;
      const match = name.match(/(.+)\((.+)\)/);
      const displayName = match ? match[1] : name;
      const tag        = match ? match[2] : '';
      html += `
        <div class="person-card">
          <div class="avatar">ğŸ‰</div>
          <div class="info">
            <div class="name">${displayName}</div>
            <div class="date">${m} æœˆ ${d} æ—¥</div>
          </div>
          ${tag?`<div class="tag">${tag}</div>`:''}
        </div>`;
    });
  });

  if (!hasAny) html += '<div class="empty">æœ¬æœˆæš‚æ— ç”Ÿæ—¥</div>';
  block.innerHTML = html;
  return block;
}

/* ===============  ä¸‰æ åˆ†é…  =============== */
function buildThreeCol() {
  const root = document.getElementById('threeCol');
  const col1 = document.createElement('div'); col1.className = 'col';
  const col2 = document.createElement('div'); col2.className = 'col';
  const col3 = document.createElement('div'); col3.className = 'col';
  root.append(col1, col2, col3);

  let todayBlock = null;
  for (let m = 1; m <= 12; m++) {
    const block = buildMonth(m);
    if (m === getCurrent().m) todayBlock = block;
    // æŒ‰é¡ºåºè½®è¯¢ï¼š1â†’å·¦ï¼Œ2â†’ä¸­ï¼Œ3â†’å³ï¼Œ4â†’å·¦â€¦â€¦
    [col1, col2, col3][(m - 1) % 3].appendChild(block);
  }

  /* å®šä½åˆ°ä»Šå¤© */
  if (todayBlock) {
    setTimeout(()=>{
      todayBlock.scrollIntoView({ behavior: 'smooth', block: 'center' });
      const ind = document.getElementById('scrollIndicator');
      ind.style.display='block';
      setTimeout(()=>ind.style.display='none',2000);
    },300);
  }
}

/* ===============  å¤´éƒ¨æ—¥æœŸ  =============== */
function updateHeaderDate() {
  const opt = { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' };
  document.getElementById('currentDate').textContent = getCurrent().date.toLocaleDateString('zh-CN', opt);
}

/* ===============  å…¥å£  =============== */
document.addEventListener('DOMContentLoaded', () => {
  updateHeaderDate();
  buildThreeCol();
});
</script>
</body>
</html>